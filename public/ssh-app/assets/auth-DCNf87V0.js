import{R as e,r as s,j as r,c as a,u as t,a as n,L as i,z as o}from"./vendor-UepC-zww.js";import{o as l,s as c,t as d,e as m,n as u,l as g}from"./forms-CxYlTloo.js";import{t as h,c as x}from"./utils-BpqZfnrR.js";function p(...e){return h(x(e))}function f(e,s="EUR"){return null==e||isNaN(e)?new Intl.NumberFormat("en-IE",{style:"currency",currency:s}).format(0):new Intl.NumberFormat("en-IE",{style:"currency",currency:s}).format(e)}function y(e){return new Intl.DateTimeFormat("en-IE",{year:"numeric",month:"long",day:"numeric"}).format(new Date(e))}function b(e){return new Intl.DateTimeFormat("en-IE",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}function w(e,s){return`${e}-${s} years`}function j(e){const s={elementary:"bg-green-100 text-green-800",basic:"bg-blue-100 text-blue-800",intermediate:"bg-yellow-100 text-yellow-800",advanced:"bg-red-100 text-red-800"};return s[e]||s.basic}function N(e){const s={pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",completed:"bg-blue-100 text-blue-800",cancelled:"bg-gray-100 text-gray-800"};return s[e]||s.pending}const v=e.forwardRef(({className:a,variant:t="primary",size:n="md",loading:i=!1,disabled:o,children:l,...c},d)=>{const m=s.useRef(null);e.useEffect(()=>{d&&("function"==typeof d?d(m.current):d.current=m.current)},[d]);const u=c.onMouseDown,g=c.onKeyDown,h={primary:"rgba(255,165,0,0.28)",secondary:"rgba(59,130,246,0.20)",outline:"rgba(99,102,241,0.08)",ghost:"rgba(0,0,0,0.08)",danger:"rgba(239,68,68,0.22)"},x=(e,s)=>{const r=m.current;if(!r)return;const a=r.getBoundingClientRect(),n=.5*Math.max(a.width,a.height),i=document.createElement("span");i.style.position="absolute",i.style.borderRadius="50%",i.style.pointerEvents="none",i.style.width=i.style.height=`${n}px`,i.style.left=e-a.left-n/2+"px",i.style.top=s-a.top-n/2+"px";const o=h[t]||"rgba(255,255,255,0.28)";i.style.background=o,i.style.transform="scale(0)",i.style.opacity="1",i.style.transition="transform 350ms cubic-bezier(.22,.9,.31,1), opacity 350ms ease-out",i.style.zIndex="10",r.appendChild(i),requestAnimationFrame(()=>{i.style.transform="scale(3)",i.style.opacity="0"});const l=()=>{try{i.remove()}catch{}};i.addEventListener("transitionend",l),setTimeout(l,400)};return r.jsxs("button",{ref:m,onMouseDown:e=>{null==u||u(e),x(e.clientX,e.clientY)},onKeyDown:e=>{if(null==g||g(e),"Enter"===e.key||" "===e.key||"Spacebar"===e.key){const e=m.current;if(!e)return;const s=e.getBoundingClientRect(),r=s.left+s.width/2,a=s.top+s.height/2;x(r,a)}},className:p("inline-flex items-center justify-center rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none relative overflow-hidden","hover:shadow-[0_20px_40px_rgba(255,165,0,0.18)] active:scale-[0.99] transition-transform",{primary:"bg-orange-600 text-white hover:bg-orange-700 focus:ring-orange-500",secondary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-orange-500",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-orange-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"}[t],{sm:"px-3 py-1.5 text-sm min-h-[40px]",md:"px-4 py-2 text-sm min-h-[44px]",lg:"px-6 py-3 text-base min-h-[48px]"}[n],a),disabled:o||i,...c,children:[i&&r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l]})});v.displayName="Button";const I="https://fxhmipivmuqgdtwzpeni.supabase.co",_=a(I,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ4aG1pcGl2bXVxZ2R0d3pwZW5pIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgxMDA1MzAsImV4cCI6MjA3MzY3NjUzMH0.Y65Muw42omwVOTi1KiOFaDbNkiITiFS9KlsWy9Nc4xk",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storageKey:"eyogi-ssh-admin-console-auth"}}),S=a(I,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ4aG1pcGl2bXVxZ2R0d3pwZW5pIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1ODEwMDUzMCwiZXhwIjoyMDczNjc2NTMwfQ.qds4eDB5fOwa-9i7iwD2qeqD5YBFWQqj5eZajaiUMzw",{auth:{autoRefreshToken:!1,persistSession:!1,detectSessionInUrl:!1}}),C=s.createContext(void 0),k=()=>{const e=s.useContext(C);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e},P=({children:e})=>{const[a,t]=s.useState(null),[n,i]=s.useState(!0),[o,l]=s.useState(!1);s.useEffect(()=>{let e=!0;(async()=>{const{data:{session:s}}=await _.auth.getSession();e&&(t((null==s?void 0:s.user)??null),i(!1),l(!0))})();const{data:{subscription:s}}=_.auth.onAuthStateChange(async(s,r)=>{e&&(t((null==r?void 0:r.user)??null),i(!1),l(!0))});return()=>{e=!1,s.unsubscribe()}},[]);const c=!!a,d={user:a,loading:n,initialized:o,signIn:async(e,s)=>{try{const{error:r}=await _.auth.signInWithPassword({email:e,password:s});return{error:r}}catch(r){return{error:r}}},signOut:async()=>{try{await _.auth.signOut(),t(null)}catch(e){}},isSuperAdmin:c,canAccess:(e,s)=>c};return r.jsx(C.Provider,{value:d,children:e})},z=e.forwardRef(({className:e,label:s,error:a,helperText:t,id:n,...i},o)=>{const l=n||(null==s?void 0:s.toLowerCase().replace(/\s+/g,"-"));return r.jsxs("div",{className:"space-y-1",children:[s&&r.jsx("label",{htmlFor:l,className:"block text-sm font-medium text-gray-700",children:s}),r.jsx("input",{ref:o,id:l,className:p("block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-1000 focus:ring-orange-1000 text-base px-4 py-3",a&&"border-red-300 focus:border-red-500 focus:ring-red-500",e),...i}),a&&r.jsx("p",{className:"text-sm text-red-600",children:a}),t&&!a&&r.jsx("p",{className:"text-sm text-gray-500",children:t})]})});function F({className:e,children:s}){return r.jsxs("div",{className:p("relative overflow-hidden rounded-lg","bg-gradient-to-br from-white/30 via-white/10 to-white/5 border border-white/20 backdrop-blur-md","shadow-[0_8px_30px_rgba(16,24,40,0.08)]",e),children:[r.jsx("div",{"aria-hidden":!0,className:"pointer-events-none absolute inset-0",children:r.jsx("div",{className:"card-sheen"})}),s]})}function A({className:e,children:s}){return r.jsx("div",{className:p("px-6 py-4 border-b border-gray-200",e),children:s})}function E({className:e,children:s}){return r.jsx("div",{className:p("px-6 py-4",e),children:s})}function M({className:e,children:s}){return r.jsx("h3",{className:p("text-lg font-semibold leading-none tracking-tight",e),children:s})}function R({className:e,children:s}){return r.jsx("p",{className:p("text-sm text-gray-600",e),children:s})}z.displayName="Input";const D=l({email:c().email("Please enter a valid email address"),password:c().min(6,"Password must be at least 6 characters")});function Z(){var e,a;const[l,c]=s.useState(!1),m=t(),{signIn:u}=k(),{register:g,handleSubmit:h,formState:{errors:x}}=n({resolver:d(D)});return r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 page-with-header",children:r.jsxs("div",{className:"max-w-md w-full space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"flex justify-center",children:r.jsx("div",{className:"h-12 w-12 bg-gradient-to-r from-orange-500 to-red-500 rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold text-lg",children:"eY"})})}),r.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Sign in to your account"}),r.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Or"," ",r.jsx(i,{to:"/auth/signup",className:"font-medium text-orange-600 hover:text-orange-500",children:"create a new account"})]})]}),r.jsxs(F,{children:[r.jsx(A,{children:r.jsx("h3",{className:"text-lg font-medium",children:"Welcome back"})}),r.jsx(E,{children:r.jsxs("form",{onSubmit:h(async e=>{c(!0);try{const{error:s}=await u(e.email,e.password);if(s)return void o.error(s.message||"Failed to sign in");o.success("Welcome back!"),m("/dashboard")}catch(s){s instanceof Error?o.error(s.message):o.error("Failed to sign in")}finally{c(!1)}}),className:"space-y-6",children:[r.jsx(z,{label:"Email address",type:"email",autoComplete:"email",...g("email"),error:null==(e=x.email)?void 0:e.message}),r.jsx(z,{label:"Password",type:"password",autoComplete:"current-password",...g("password"),error:null==(a=x.password)?void 0:a.message}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"}),r.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900",children:"Remember me"})]}),r.jsx("div",{className:"text-sm",children:r.jsx(i,{to:"/auth/forgot-password",className:"font-medium text-orange-600 hover:text-orange-500",children:"Forgot your password?"})})]}),r.jsx(v,{type:"submit",className:"w-full",loading:l,children:"Sign in"})]})})]}),r.jsx("div",{className:"text-center",children:r.jsxs("p",{className:"text-sm text-gray-600",children:["Need help?"," ",r.jsx(i,{to:"/contact",className:"font-medium text-orange-600 hover:text-orange-500",children:"Contact support"})]})})]})})}const J=l({email:c().email("Please enter a valid email address"),password:c().min(6,"Password must be at least 6 characters"),confirmPassword:c(),full_name:c().min(2,"Full name must be at least 2 characters"),age:u().min(4,"Age must be at least 4").max(100,"Age must be less than 100"),role:m(["student","teacher"]),phone:c().optional(),parent_guardian_name:c().optional(),parent_guardian_email:c().email().optional().or(g("")),parent_guardian_phone:c().optional()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}).refine(e=>!(e.age<18&&"student"===e.role)||e.parent_guardian_name&&e.parent_guardian_email,{message:"Parent/Guardian information is required for students under 18",path:["parent_guardian_name"]});function O(){var e,a,l,c,m,u,g,h,x;const[p,f]=s.useState(!1),y=t(),{registerWebsiteUser:b}=k(),{register:w,handleSubmit:j,watch:N,formState:{errors:I}}=n({resolver:d(J),defaultValues:{role:"student"}}),_=N("age"),S=N("role");return r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 page-with-header",children:r.jsxs("div",{className:"max-w-2xl w-full space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"flex justify-center",children:r.jsx("div",{className:"h-12 w-12 bg-gradient-to-r from-orange-500 to-red-500 rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold text-lg",children:"eY"})})}),r.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Create your account"}),r.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Or"," ",r.jsx(i,{to:"/auth/signin",className:"font-medium text-orange-600 hover:text-orange-500",children:"sign in to your existing account"})]})]}),r.jsxs(F,{children:[r.jsx(A,{children:r.jsx("h3",{className:"text-lg font-medium",children:"Join eYogi Gurukul"})}),r.jsx(E,{children:r.jsxs("form",{onSubmit:j(async e=>{f(!0);try{const{error:s}=await b({email:e.email,password:e.password,full_name:e.full_name,role:e.role,phone:e.phone});if(s)return void(s.includes("Account created! Please check your email")?(o.success(s),y("/auth/signin")):o.error(s));o.success("Account created successfully! You can now sign in."),y("/auth/signin")}catch(s){s instanceof Error?o.error(s.message):o.error("Failed to create account")}finally{f(!1)}}),className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(z,{label:"Full Name",...w("full_name"),error:null==(e=I.full_name)?void 0:e.message}),r.jsx(z,{label:"Email Address",type:"email",autoComplete:"email",...w("email"),error:null==(a=I.email)?void 0:a.message}),r.jsx(z,{label:"Age",type:"number",...w("age",{valueAsNumber:!0}),error:null==(l=I.age)?void 0:l.message}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Role"}),r.jsxs("select",{...w("role"),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500 text-base px-4 py-3",children:[r.jsx("option",{value:"student",children:"Student"}),r.jsx("option",{value:"teacher",children:"Teacher"})]}),I.role&&r.jsx("p",{className:"text-sm text-red-600",children:I.role.message})]}),r.jsx(z,{label:"Phone Number (Optional)",type:"tel",...w("phone"),error:null==(c=I.phone)?void 0:c.message})]}),_<18&&"student"===S&&r.jsxs("div",{className:"border-t pt-6",children:[r.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Parent/Guardian Information (Required for students under 18)"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(z,{label:"Parent/Guardian Name",...w("parent_guardian_name"),error:null==(m=I.parent_guardian_name)?void 0:m.message}),r.jsx(z,{label:"Parent/Guardian Email",type:"email",...w("parent_guardian_email"),error:null==(u=I.parent_guardian_email)?void 0:u.message}),r.jsx(z,{label:"Parent/Guardian Phone",type:"tel",...w("parent_guardian_phone"),error:null==(g=I.parent_guardian_phone)?void 0:g.message})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(z,{label:"Password",type:"password",autoComplete:"new-password",...w("password"),error:null==(h=I.password)?void 0:h.message}),r.jsx(z,{label:"Confirm Password",type:"password",autoComplete:"new-password",...w("confirmPassword"),error:null==(x=I.confirmPassword)?void 0:x.message})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{id:"agree-terms",name:"agree-terms",type:"checkbox",required:!0,className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"}),r.jsxs("label",{htmlFor:"agree-terms",className:"ml-2 block text-sm text-gray-900",children:["I agree to the"," ",r.jsx(i,{to:"/terms",className:"text-orange-600 hover:text-orange-500",children:"Terms of Service"})," ","and"," ",r.jsx(i,{to:"/privacy",className:"text-orange-600 hover:text-orange-500",children:"Privacy Policy"})]})]}),r.jsx(v,{type:"submit",className:"w-full",loading:p,children:"Create Account"})]})})]}),r.jsx("div",{className:"text-center",children:r.jsxs("p",{className:"text-sm text-gray-600",children:["Need help?"," ",r.jsx(i,{to:"/contact",className:"font-medium text-orange-600 hover:text-orange-500",children:"Contact support"})]})})]})})}export{P as A,v as B,F as C,z as I,Z as S,A as a,E as b,p as c,y as d,f as e,b as f,j as g,N as h,w as i,M as j,R as k,O as l,S as s,k as u};
