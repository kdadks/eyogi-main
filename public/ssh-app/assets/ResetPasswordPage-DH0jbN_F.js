import{E as e,h as s,r as a,i as r,j as t,z as i}from"./vendor-react-DCALsXS8.js";import{t as o,o as m,s as l}from"./vendor-forms-B0kmz9hl.js";import{b as n,f as c,n as d,B as u,I as g}from"./admin-analytics-BUJUGyzI.js";import{v as h,r as N}from"./index-BaxVk0cq.js";import"./vendor-misc-Dxs4t1yE.js";import"./vendor-ui-Bmdc4IWn.js";import"./admin-misc-9vir4T6x.js";import"./admin-assignments-Cx7DOfUV.js";import"./admin-batch-BFzGO27E.js";import"./admin-content-LS_eLhwS.js";import"./admin-resources-DlJorqJM.js";import"./vendor-jspdf-DcFMtNGo.js";import"./vendor-pdfjs-D7jtXKOJ.js";import"./admin-finance-3P7fiBd4.js";import"./vendor-supabase-EmK__MhW.js";const x=m({password:l().min(8,"Password must be at least 8 characters").regex(/[A-Z]/,"Password must contain at least one uppercase letter").regex(/[0-9]/,"Password must contain at least one digit").regex(/[!@#$%^&*(),.?":{}|<>]/,"Password must contain at least one special character").refine(e=>!/\s/.test(e),"Password must not contain spaces"),confirmPassword:l().min(1,"Please confirm your password")}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function P(){const[m]=e(),l=s(),[P,b]=a.useState(!1),[p,w]=a.useState(!0),[f,j]=a.useState(!1),S=m.get("token"),{register:v,handleSubmit:D,formState:{errors:y}}=r({resolver:o(x),mode:"onChange"});a.useEffect(()=>{(async()=>{if(!S)return i.error("Invalid reset link"),w(!1),void j(!1);const e=await h(S);w(!1),e.valid?j(!0):(j(!1),i.error(e.error||"Invalid or expired reset link"))})()},[S]);return p?t.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-red-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 page-with-header",children:t.jsxDEV("div",{className:"max-w-md w-full",children:t.jsxDEV(n,{className:"shadow-2xl border border-orange-100/20 bg-white/98 backdrop-blur-xl rounded-2xl overflow-hidden",children:[t.jsxDEV("div",{className:"h-1.5 bg-gradient-to-r from-orange-500 via-red-500 to-orange-500"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:105,columnNumber:13},this),t.jsxDEV(c,{className:"p-8 text-center",children:[t.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:107,columnNumber:15},this),t.jsxDEV("p",{className:"text-gray-600",children:"Validating reset link..."},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:108,columnNumber:15},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:106,columnNumber:13},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:104,columnNumber:11},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:103,columnNumber:9},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:102,columnNumber:7},this):f?t.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-red-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 page-with-header",children:t.jsxDEV("div",{className:"max-w-md w-full",children:[t.jsxDEV("div",{className:"text-center mb-6",children:[t.jsxDEV("div",{className:"flex justify-center mb-6",children:t.jsxDEV("div",{className:"relative",children:[t.jsxDEV("div",{className:"h-14 w-14 bg-gradient-to-r from-orange-500 to-red-500 rounded-2xl flex items-center justify-center shadow-lg",children:t.jsxDEV("span",{className:"text-white font-bold text-xl",children:"eY"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:153,columnNumber:17},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:152,columnNumber:15},this),t.jsxDEV("div",{className:"absolute -top-1 -right-1 h-5 w-5 bg-yellow-400 rounded-full flex items-center justify-center",children:t.jsxDEV("span",{className:"text-xs font-bold text-orange-800",children:"ॐ"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:156,columnNumber:17},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:155,columnNumber:15},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:151,columnNumber:13},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:150,columnNumber:11},this),t.jsxDEV("h1",{className:"text-3xl font-bold text-gray-900 mb-1",children:"Reset Your Password"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:160,columnNumber:11},this),t.jsxDEV("p",{className:"text-sm text-gray-600",children:"Enter your new password below"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:161,columnNumber:11},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:149,columnNumber:9},this),t.jsxDEV(n,{className:"shadow-2xl border border-orange-100/20 bg-white/98 backdrop-blur-xl rounded-2xl overflow-hidden",children:[t.jsxDEV("div",{className:"h-1.5 bg-gradient-to-r from-orange-500 via-red-500 to-orange-500"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:166,columnNumber:11},this),t.jsxDEV(d,{className:"text-center pt-6 pb-3 px-6",children:t.jsxDEV("h2",{className:"text-xl font-bold bg-gradient-to-r from-orange-600 to-red-600 bg-clip-text text-transparent",children:"Create New Password"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:168,columnNumber:13},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:167,columnNumber:11},this),t.jsxDEV(c,{className:"px-6 pb-6",children:t.jsxDEV("form",{onSubmit:D(async e=>{if(S){b(!0);try{const s=await N(S,e.password);s.success?(i.success("Password reset successful! You can now sign in with your new password."),setTimeout(()=>{l("/auth/signin")},2e3)):i.error(s.error||"Failed to reset password")}catch(s){s instanceof Error?i.error(s.message):i.error("Failed to reset password")}finally{b(!1)}}else i.error("Invalid reset link")}),className:"space-y-4",children:[t.jsxDEV("div",{children:[t.jsxDEV(g,{label:t.jsxDEV(t.Fragment,{children:["New Password ",t.jsxDEV("span",{className:"text-red-500",children:"*"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:178,columnNumber:36},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:177,columnNumber:21},this),type:"password",autoComplete:"new-password",placeholder:"Enter new password",className:"h-11 text-sm",...v("password"),error:y.password?.message},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:175,columnNumber:17},this),t.jsxDEV("p",{className:"mt-1.5 text-xs text-gray-500 leading-tight",children:"8+ characters, 1 uppercase, 1 digit, 1 special character (!@#$%^&*), no spaces"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:188,columnNumber:17},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:174,columnNumber:15},this),t.jsxDEV(g,{label:t.jsxDEV(t.Fragment,{children:["Confirm Password ",t.jsxDEV("span",{className:"text-red-500",children:"*"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:196,columnNumber:38},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:195,columnNumber:19},this),type:"password",autoComplete:"new-password",placeholder:"Confirm new password",className:"h-11 text-sm",...v("confirmPassword"),error:y.confirmPassword?.message},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:193,columnNumber:15},this),t.jsxDEV(u,{type:"submit",className:"w-full h-11 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white font-medium shadow-lg hover:shadow-xl transition-all duration-200",loading:P,children:P?"Resetting Password...":"Reset Password"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:207,columnNumber:15},this),t.jsxDEV("div",{className:"text-center pt-2",children:t.jsxDEV("button",{type:"button",onClick:()=>l("/auth/signin"),className:"text-sm font-medium text-gray-600 hover:text-gray-800 transition-colors",children:"← Back to sign in"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:216,columnNumber:17},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:215,columnNumber:15},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:173,columnNumber:13},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:172,columnNumber:11},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:165,columnNumber:9},this),t.jsxDEV("div",{className:"text-center mt-6",children:[t.jsxDEV("blockquote",{className:"text-sm text-gray-500 italic",children:'"The secret of change is to focus all of your energy, not on fighting the old, but on building the new"'},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:230,columnNumber:11},this),t.jsxDEV("cite",{className:"text-xs text-gray-400 mt-1",children:"- Socrates"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:234,columnNumber:11},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:229,columnNumber:9},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:147,columnNumber:7},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:146,columnNumber:5},this):t.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-red-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 page-with-header",children:t.jsxDEV("div",{className:"max-w-md w-full",children:t.jsxDEV(n,{className:"shadow-2xl border border-orange-100/20 bg-white/98 backdrop-blur-xl rounded-2xl overflow-hidden",children:[t.jsxDEV("div",{className:"h-1.5 bg-gradient-to-r from-red-500 via-orange-500 to-red-500"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:121,columnNumber:13},this),t.jsxDEV(d,{className:"text-center pt-6 pb-3 px-6",children:[t.jsxDEV("h3",{className:"text-2xl font-bold text-gray-900",children:"Invalid Reset Link"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:123,columnNumber:15},this),t.jsxDEV("p",{className:"text-sm text-gray-600 mt-2",children:"This password reset link is invalid or has expired."},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:124,columnNumber:15},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:122,columnNumber:13},this),t.jsxDEV(c,{className:"px-6 pb-6",children:[t.jsxDEV("p",{className:"text-sm text-gray-600 mb-4 text-center",children:"Reset links are valid for 24 hours. Please request a new password reset."},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:129,columnNumber:15},this),t.jsxDEV(u,{onClick:()=>l("/auth/forgot-password"),className:"w-full h-11 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white font-medium shadow-lg hover:shadow-xl transition-all duration-200",children:"Request New Reset Link"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:132,columnNumber:15},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:128,columnNumber:13},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:120,columnNumber:11},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:119,columnNumber:9},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/pages/auth/ResetPasswordPage.tsx",lineNumber:118,columnNumber:7},this)}export{P as default};
