import{r as e,z as a,j as n,m as i}from"./vendor-react-DCALsXS8.js";import{c as s,q as t,s as m,C as o,a as r,B as c,b as l,f as d,n as u}from"./admin-analytics-BUJUGyzI.js";import{R as p,l as N,r as g,m as x,i as b,D as h,t as f,c as y,h as j,j as S,T as D}from"./vendor-ui-Bmdc4IWn.js";import{g as v}from"./admin-misc-9vir4T6x.js";async function C(e){const a=s("compliance","items",e||"all");return t.get(a,async()=>{try{let a=m.from("compliance_items").select("id, title, description, target_role, type, has_form, is_mandatory, due_date, is_active, created_by, created_at, updated_at").eq("is_active",!0).order("created_at",{ascending:!1});e&&(a=a.eq("target_role",e));const{data:n,error:i}=await a;if(i)throw i;return n||[]}catch(a){throw console.error("Error fetching compliance items:",a),a}},o.COMPLIANCE)}async function E(e){const a=s("compliance","form",e);return t.get(a,async()=>{try{const{data:a,error:n}=await m.from("compliance_forms").select("*").eq("id",e).single();if(n)throw n;return a}catch(a){throw console.error("Error fetching compliance form:",a),a}},o.COMPLIANCE)}async function P(e){const a=s("compliance","submissions",JSON.stringify(e));return t.get(a,async()=>{try{let a=m.from("compliance_submissions").select("id, compliance_item_id, user_id, status, submitted_at, reviewed_at, reviewed_by, notes").order("submitted_at",{ascending:!1});e.complianceItemId&&(a=a.eq("compliance_item_id",e.complianceItemId)),e.userId&&(a=a.eq("user_id",e.userId)),e.status&&(a=a.eq("status",e.status)),e.reviewerId&&(a=a.eq("reviewed_by",e.reviewerId));const{data:n,error:i}=await a;if(i)throw i;if(!n||0===n.length)return[];const s=[...new Set(n.map(e=>e.user_id).filter(Boolean))],t=[...new Set(n.map(e=>e.compliance_item_id).filter(Boolean))],o=n.map(e=>e.id),[c,l,d]=await Promise.all([s.length>0?m.from("profiles").select("id, email, full_name").in("id",s):Promise.resolve({data:[]}),t.length>0?m.from("compliance_items").select("id, title, type").in("id",t):Promise.resolve({data:[]}),o.length>0?m.from("compliance_files").select("id, submission_id, file_path, file_name").in("submission_id",o):Promise.resolve({data:[]})]),u=c.data||[],p=l.data||[],N=d.data||[],g=u.map(e=>r(e));return n.map(e=>({...e,user:g.find(a=>a.id===e.user_id)||null,compliance_item:p.find(a=>a.id===e.compliance_item_id)||null,files:N.filter(a=>a.submission_id===e.id)||[],reviewer:e.reviewed_by&&g.find(a=>a.id===e.reviewed_by)||null}))}catch(a){throw console.error("Error fetching compliance submissions:",a),a}},o.COMPLIANCE)}async function I(e,a,n,i){try{const{data:s,error:o}=await m.from("compliance_submissions").insert({compliance_item_id:e,user_id:a,form_data:n,status:"submitted",submitted_at:(new Date).toISOString()}).select().single();if(o)throw o;if(i&&i.length>0){const e=await async function(e,a){try{const n=[];for(const i of a){if(i.size>2097152)throw new Error(`File ${i.name} exceeds 2MB size limit`);const a=`${e}/${Date.now()}_${i.name}`,{error:s}=await m.storage.from("compliance-files").upload(a,i);if(s)throw s;const{data:{publicUrl:t}}=m.storage.from("compliance-files").getPublicUrl(a),{data:o,error:r}=await m.from("compliance_files").insert({submission_id:e,field_name:"file",original_name:i.name,file_url:t,file_type:i.type,file_size:i.size,uploaded_at:(new Date).toISOString()}).select().single();if(r)throw r;n.push(o)}return n}catch(n){throw console.error("Error uploading compliance files:",n),n}}(s.id,i);s.files=e}return t.invalidatePattern("compliance:.*"),s}catch(s){throw console.error("Error submitting compliance form:",s),s}}async function _(e,a){try{const{data:n,error:i}=await m.from("compliance_submissions").select("*").eq("compliance_item_id",e).eq("user_id",a);if(i&&"PGRST116"!==i.code)throw console.error("Error checking existing submission:",i),i;if(n&&n.length>0){const e=n[0];if("rejected"===e.status){const{data:a,error:n}=await m.from("compliance_submissions").update({form_data:{checkbox_completed:!0,resubmitted:!0},status:"submitted",submitted_at:(new Date).toISOString(),rejection_reason:null}).eq("id",e.id).select().single();if(n)throw console.error("Error updating rejected submission:",n),n;return t.invalidatePattern("compliance:.*"),a}return e}const{data:s,error:o}=await m.from("compliance_submissions").insert({compliance_item_id:e,user_id:a,form_data:{checkbox_completed:!0},status:"submitted",submitted_at:(new Date).toISOString()}).select().single();if(o)throw console.error("Error creating submission:",o),o;return await V(a,"form_submitted","A compliance item has been marked as complete and requires review.",e,s.id),t.invalidatePattern("compliance:.*"),s}catch(n){throw console.error("Error marking compliance as complete:",n),n}}async function M(e,a){const n=s("compliance","user-status",e,a);return t.get(n,async()=>{try{const n=await C(a),i=await P({userId:e}),s=new Map;i.forEach(e=>{s.set(e.compliance_item_id,e)});return n.map(e=>{const a=s.get(e.id);return{id:e.id,title:e.title,description:e.description,type:e.type,status:a?.status||"pending",is_mandatory:e.is_mandatory,due_date:e.due_date,has_form:e.has_form&&null!=e.form_id,submission_id:a?.id,rejection_reason:a?.rejection_reason,can_submit:!a||"rejected"===a.status}})}catch(n){throw console.error("Error getting user compliance status:",n),n}},o.COMPLIANCE)}async function T(e,a){const n=s("compliance","stats",e||"all",a||"all");return t.get(n,async()=>{try{let n=[];e&&a&&(n=await M(e,a));const i=n.length,s=n.filter(e=>"approved"===e.status).length,t=n.filter(e=>"pending"===e.status||"submitted"===e.status||"rejected"===e.status).length;return{total_items:i,completed_items:s,pending_items:t,overdue_items:n.filter(e=>e.due_date&&new Date(e.due_date)<new Date&&"approved"!==e.status).length,completion_percentage:i>0?Math.round(s/i*100):0}}catch(n){throw console.error("Error getting compliance stats:",n),n}},o.COMPLIANCE)}async function V(e,a,n,i,s,t){try{await m.from("compliance_notifications").insert({user_id:e,type:a,title:a.replace("_"," ").toUpperCase(),message:t?`${n} Reason: ${t}`:n,compliance_item_id:i,submission_id:s,is_read:!1,created_at:(new Date).toISOString()})}catch(o){console.error("Error creating compliance notification:",o)}}async function H(e){const a=s("compliance","notifications",e);return t.get(a,async()=>{const{data:a,error:n}=await m.from("compliance_notifications").select("*").eq("user_id",e).order("created_at",{ascending:!1});if(n)throw console.error("Error fetching notifications:",n),new Error("Failed to fetch notifications");return a||[]},o.NOTIFICATIONS)}async function W(e){const{error:a}=await m.from("compliance_notifications").update({is_read:!0,read_at:(new Date).toISOString()}).eq("id",e);if(a)throw console.error("Error marking notification as read:",a),new Error("Failed to update notification");t.invalidatePattern("compliance:notifications:.*")}async function w(e){const{error:a}=await m.from("compliance_notifications").delete().eq("id",e);if(a)throw console.error("Error deleting notification:",a),new Error("Failed to delete notification");t.invalidatePattern("compliance:notifications:.*")}function k({submissions:s,onReview:o}){const[r,u]=e.useState(null),[N,g]=e.useState(!1),[b,y]=e.useState("approve"),[j,S]=e.useState(""),[D,v]=e.useState("all"),[C,E]=e.useState(!1),[P,I]=e.useState(1),_=15,M=s.filter(e=>"all"===D||e.status===D),T=(e,a)=>{u(e),y(a),S(""),g(!0)};return n.jsxDEV(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[n.jsxDEV("div",{className:"flex space-x-2",children:[{key:"all",label:"All"},{key:"submitted",label:"Pending"},{key:"approved",label:"Approved"},{key:"rejected",label:"Rejected"}].map(e=>n.jsxDEV("button",{onClick:()=>v(e.key),className:"px-3 py-1.5 text-xs font-medium rounded transition-colors "+(D===e.key?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[e.label,"all"!==e.key&&n.jsxDEV("span",{className:"ml-1.5",children:["(",s.filter(a=>a.status===e.key).length,")"]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:927,columnNumber:15},this)]},e.key,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:916,columnNumber:11},this))},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:909,columnNumber:7},this),n.jsxDEV(l,{children:n.jsxDEV(d,{className:"p-4",children:0===M.length?n.jsxDEV("p",{className:"text-gray-500 text-center py-8 text-sm",children:["No ","all"!==D?D:""," submissions found"]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:938,columnNumber:13},this):n.jsxDEV("div",{className:"space-y-3",children:[M.slice((P-1)*_,P*_).map(e=>n.jsxDEV("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:n.jsxDEV("div",{className:"flex items-start justify-between",children:[n.jsxDEV("div",{className:"flex-1",children:[n.jsxDEV("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsxDEV("h4",{className:"font-semibold text-gray-900 text-sm",children:e.compliance_item?.title||"Unknown Item"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:957,columnNumber:27},this),n.jsxDEV("span",{className:"text-xs px-2 py-1 rounded-sm font-medium "+("approved"===e.status?"bg-green-100 text-green-800":"rejected"===e.status?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"),children:e.status?.charAt(0).toUpperCase()+e.status?.slice(1).toLowerCase()},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:960,columnNumber:27},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:956,columnNumber:25},this),n.jsxDEV("div",{className:"flex items-center space-x-4 text-xs text-gray-600 mb-2",children:[n.jsxDEV("div",{className:"flex items-center space-x-1",children:[n.jsxDEV(x,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:977,columnNumber:29},this),n.jsxDEV("span",{children:e.user?.full_name||"Unknown User"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:978,columnNumber:29},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:976,columnNumber:27},this),n.jsxDEV("div",{className:"flex items-center space-x-1",children:[n.jsxDEV(h,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:981,columnNumber:29},this),n.jsxDEV("span",{children:[new Date(e.submitted_at).toLocaleDateString()," ",new Date(e.submitted_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:982,columnNumber:29},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:980,columnNumber:27},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:975,columnNumber:25},this),e.form_data&&n.jsxDEV("div",{className:"mt-3 bg-gray-50 rounded p-3 border border-gray-200",children:[n.jsxDEV("p",{className:"text-xs font-medium text-gray-700 mb-2",children:"Submission Details:"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:995,columnNumber:29},this),n.jsxDEV("div",{className:"space-y-1",children:Object.entries(e.form_data).map(([e,a])=>n.jsxDEV("div",{className:"text-xs",children:[n.jsxDEV("span",{className:"text-gray-600",children:[e,":"]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:1001,columnNumber:35},this)," ",n.jsxDEV("span",{className:"text-gray-900 font-medium",children:"boolean"==typeof a?a?"Yes":"No":String(a)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:1002,columnNumber:35},this)]},e,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:1e3,columnNumber:33},this))},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:998,columnNumber:29},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:994,columnNumber:27},this),"rejected"===e.status&&e.rejection_reason&&n.jsxDEV("div",{className:"mt-3 bg-red-50 rounded p-3 border border-red-200",children:[n.jsxDEV("p",{className:"text-xs font-medium text-red-800 mb-1",children:"Rejection Reason:"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:1018,columnNumber:29},this),n.jsxDEV("p",{className:"text-xs text-red-700",children:e.rejection_reason},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:1021,columnNumber:29},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:1017,columnNumber:27},this),("approved"===e.status||"rejected"===e.status)&&e.reviewed_at&&n.jsxDEV("div",{className:"mt-2 text-xs text-gray-500",children:["Reviewed on ",new Date(e.reviewed_at).toLocaleDateString(),e.reviewer&&` by ${e.reviewer.full_name}`]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:1028,columnNumber:29},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:954,columnNumber:23},this),"submitted"===e.status&&n.jsxDEV("div",{className:"flex flex-col space-y-2 ml-4",children:[n.jsxDEV(c,{size:"sm",className:"h-7 px-3 text-xs bg-green-600 hover:bg-green-700 text-white",onClick:()=>T(e,"approve"),children:[n.jsxDEV(f,{className:"h-3.5 w-3.5 mr-1"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:1043,columnNumber:29},this),"Approve"]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:1038,columnNumber:27},this),n.jsxDEV(c,{size:"sm",variant:"outline",className:"h-7 px-3 text-xs border-red-300 text-red-600 hover:bg-red-50",onClick:()=>T(e,"reject"),children:[n.jsxDEV(p,{className:"h-3.5 w-3.5 mr-1"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:1052,columnNumber:29},this),"Reject"]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:1046,columnNumber:27},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:1037,columnNumber:25},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:953,columnNumber:21},this)},e.id,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:949,columnNumber:19},this)),M.length>_&&n.jsxDEV("div",{className:"flex items-center justify-between mt-4 pt-4 border-t",children:[n.jsxDEV("div",{className:"text-xs text-gray-600",children:["Showing ",(P-1)*_+1," to"," ",Math.min(P*_,M.length)," of"," ",M.length]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:1062,columnNumber:19},this),n.jsxDEV("div",{className:"flex gap-1",children:[n.jsxDEV(c,{size:"sm",variant:"ghost",onClick:()=>I(Math.max(1,P-1)),disabled:1===P,children:"← Prev"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:1068,columnNumber:21},this),n.jsxDEV(c,{size:"sm",variant:"ghost",onClick:()=>I(Math.min(Math.ceil(M.length/_),P+1)),disabled:P===Math.ceil(M.length/_),children:"Next →"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:1076,columnNumber:21},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:1067,columnNumber:19},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:1061,columnNumber:17},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:942,columnNumber:13},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:936,columnNumber:9},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:935,columnNumber:7},this),N&&r&&n.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxDEV(i.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full mx-4",children:n.jsxDEV("div",{className:"flex items-start space-x-3",children:[n.jsxDEV("div",{className:"flex-shrink-0",children:"approve"===b?n.jsxDEV(f,{className:"h-6 w-6 text-green-600"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:1113,columnNumber:19},this):n.jsxDEV(p,{className:"h-6 w-6 text-red-600"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:1115,columnNumber:19},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:1111,columnNumber:15},this),n.jsxDEV("div",{className:"flex-1",children:[n.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"approve"===b?"Approve Submission":"Reject Submission"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:1119,columnNumber:17},this),n.jsxDEV("p",{className:"text-sm text-gray-600 mb-4",children:"approve"===b?`Are you sure you want to approve this submission for "${r.compliance_item?.title}"?`:`Please provide a reason for rejecting this submission for "${r.compliance_item?.title}".`},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:1122,columnNumber:17},this),"reject"===b&&n.jsxDEV("div",{className:"mb-4",children:[n.jsxDEV("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Rejection Reason *"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:1130,columnNumber:21},this),n.jsxDEV("textarea",{value:j,onChange:e=>S(e.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-red-500",rows:3,placeholder:"Enter the reason for rejection..."},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:1133,columnNumber:21},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:1129,columnNumber:19},this),n.jsxDEV("div",{className:"flex justify-end space-x-2",children:[n.jsxDEV(c,{variant:"outline",className:"h-8 px-3 text-xs",onClick:()=>{g(!1),u(null)},disabled:C,children:"Cancel"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:1144,columnNumber:19},this),n.jsxDEV(c,{className:`h-8 px-3 text-xs ${"approve"===b?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"} text-white`,onClick:async()=>{if(r)if("reject"!==b||j.trim()){E(!0);try{await async function(e,a,n){try{let a=null;const{data:s,error:o}=await m.from("compliance_submissions").update({status:"approve"===n.action?"approved":"rejected",reviewed_at:(new Date).toISOString(),reviewed_by:a,rejection_reason:"reject"===n.action?n.rejection_reason:null}).eq("id",e).select().single();if(o)throw console.error("❌ Error updating submission:",o),o;const[r,c]=await Promise.all([m.from("compliance_items").select("*").eq("id",s.compliance_item_id).single().then(e=>e.data),m.from("profiles").select("id, email, full_name").eq("id",s.user_id).single().then(e=>e.data)]),l={...s,compliance_item:r,user:c};try{await V(l.user_id,"approve"===n.action?"submission_approved":"submission_rejected","approve"===n.action?`Your compliance submission for "${r?.title||"item"}" has been approved.`:`Your compliance submission for "${r?.title||"item"}" has been rejected.`,l.compliance_item_id,e,n.rejection_reason)}catch(i){console.error("⚠️ Error creating notification (non-critical):",i)}return t.invalidatePattern("compliance:.*"),l}catch(s){throw console.error("❌ Error reviewing compliance submission:",s),s}}(r.id,0,{submission_id:r.id,action:b,rejection_reason:"reject"===b?j:void 0});a.success(`Submission ${"approve"===b?"approved":"rejected"} successfully`,{duration:4e3}),g(!1),u(null),o()}catch(e){console.error("❌ Error reviewing submission:",e);let n="Failed to review submission. ";n+=e&&"object"==typeof e?"message"in e?e.message:"details"in e?String(e.details):"Please try again.":"Please try again.",a.error(n,{duration:6e3})}finally{E(!1)}}else a.error("Please provide a rejection reason")},disabled:C,children:C?n.jsxDEV("span",{className:"flex items-center",children:[n.jsxDEV("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white mr-2"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:1166,columnNumber:25},this),"Processing..."]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:1165,columnNumber:23},this):"approve"===b?"Approve":"Reject"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:1155,columnNumber:19},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:1143,columnNumber:17},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:1118,columnNumber:15},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:1110,columnNumber:13},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:1105,columnNumber:11},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:1104,columnNumber:9},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:903,columnNumber:5},this)}const O=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const[r,D]=e.useState("overview"),[v,E]=e.useState(!0),[I,_]=e.useState(null),[M,T]=e.useState([]),[V,H]=e.useState([]),[W,w]=e.useState(null),[O,q]=e.useState(!1),[A,L]=e.useState(null),[z,F]=e.useState(!1),[U,$]=e.useState("add"),[R,B]=e.useState(1),Y=15,[G,J]=e.useState({title:"",description:"",target_role:"teacher",type:"form_submission",has_form:!1,is_mandatory:!1,due_date:""});e.useEffect(()=>{K()},[]);const K=async()=>{E(!0),w(null);try{const e=await async function(){const e=s("compliance","admin-stats");return t.get(e,async()=>{try{const[e,a,n,i,s]=await Promise.all([m.from("compliance_items").select("*",{count:"exact",head:!0}).eq("is_active",!0),m.from("compliance_submissions").select("*",{count:"exact",head:!0}),m.from("compliance_submissions").select("*",{count:"exact",head:!0}).eq("status","submitted"),m.from("compliance_submissions").select("*",{count:"exact",head:!0}).eq("status","approved"),m.from("compliance_submissions").select("*",{count:"exact",head:!0}).eq("status","rejected")]),t={teacher:{total_items:0,completed_items:0,pending_items:0,overdue_items:0,completion_percentage:0},parent:{total_items:0,completed_items:0,pending_items:0,overdue_items:0,completion_percentage:0},student:{total_items:0,completed_items:0,pending_items:0,overdue_items:0,completion_percentage:0}};return{total_items:e.count||0,total_submissions:a.count||0,pending_reviews:n.count||0,approved_submissions:i.count||0,rejected_submissions:s.count||0,by_role:t}}catch(W){throw console.error("Error getting admin compliance stats:",W),W}},o.COMPLIANCE)}();_(e);const a=await C();T(a);const n=await P({});H(n)}catch(e){console.error("❌ Error loading compliance data:",e),w(e instanceof Error?e.message:"Unknown error"),a.error("Failed to load compliance data")}finally{E(!1)}},Q=e=>{$("edit"),L(e),J({title:e.title,description:e.description,target_role:e.target_role,type:e.type||"form_submission",has_form:e.has_form||!1,is_mandatory:e.is_mandatory,due_date:e.due_date||""}),F(!0)},X=async()=>{if(G.title.trim())if(G.description.trim())try{if("add"===U){const e=M.length>0?M[0]:null,n={title:G.title,description:G.description,target_role:e?e.target_role:G.target_role,type:e?e.type:G.type,has_form:G.has_form,is_mandatory:G.is_mandatory,due_date:G.due_date||void 0,form_id:void 0,is_active:!0,created_by:e?e.created_by:"00000000-0000-0000-0000-000000000000"};await async function(e){try{const{data:a,error:n}=await m.from("compliance_items").insert({...e,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()}).select().single();if(n)throw n;return t.invalidatePattern("compliance:.*"),a}catch(W){throw console.error("Error creating compliance item:",W),W}}(n);a.success("Compliance item created successfully")}else"edit"===U&&A&&(await async function(e,a){try{const{data:n,error:i}=await m.from("compliance_items").update({...a,updated_at:(new Date).toISOString()}).eq("id",e).select().single();if(i)throw i;return t.invalidatePattern("compliance:.*"),n}catch(W){throw console.error("Error updating compliance item:",W),W}}(A.id,{title:G.title,description:G.description,target_role:G.target_role,type:G.type,has_form:G.has_form,is_mandatory:G.is_mandatory,due_date:G.due_date||void 0}),a.success("Compliance item updated successfully"));F(!1),L(null),await K()}catch(e){console.error("Error saving item:",e);let n=`Failed to ${"add"===U?"create":"update"} item`;e&&"object"==typeof e&&("message"in e&&(n+=`: ${e.message}`),"details"in e&&console.error("Error details:",e.details),"hint"in e&&console.error("Error hint:",e.hint)),a.error(n)}else a.error("Description is required");else a.error("Title is required")};return v?n.jsxDEV("div",{className:"p-4",children:n.jsxDEV("div",{className:"bg-white rounded shadow p-6",children:[n.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:220,columnNumber:11},this),n.jsxDEV("p",{className:"text-center text-gray-600 mt-3 text-sm",children:"Loading compliance data..."},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:221,columnNumber:11},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:219,columnNumber:9},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:218,columnNumber:7},this):W?n.jsxDEV("div",{className:"p-4",children:n.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded p-4",children:n.jsxDEV("div",{className:"flex items-center space-x-2",children:[n.jsxDEV(p,{className:"h-5 w-5 text-red-600 flex-shrink-0"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:232,columnNumber:13},this),n.jsxDEV("div",{children:[n.jsxDEV("h3",{className:"text-red-800 font-medium text-sm",children:"Error loading data"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:234,columnNumber:15},this),n.jsxDEV("p",{className:"text-red-700 text-xs mt-1",children:W},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:235,columnNumber:15},this),n.jsxDEV(c,{onClick:K,variant:"outline",className:"mt-2 h-7 px-2 text-xs",size:"sm",children:"Try again"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:236,columnNumber:15},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:233,columnNumber:13},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:231,columnNumber:11},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:230,columnNumber:9},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:229,columnNumber:7},this):n.jsxDEV("div",{className:"p-4",children:[n.jsxDEV("div",{className:"mb-4",children:n.jsxDEV("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded max-w-md",children:[{key:"overview",label:"Overview",icon:N},{key:"items",label:"Items",icon:g},{key:"submissions",label:"Submissions",icon:x},{key:"forms",label:"Forms",icon:b}].map(e=>n.jsxDEV("button",{onClick:()=>D(e.key),className:"flex items-center space-x-1.5 px-3 py-1.5 rounded text-xs font-medium transition-colors "+(r===e.key?"bg-white text-blue-600 shadow":"text-gray-600 hover:text-gray-900"),children:[n.jsxDEV(e.icon,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:271,columnNumber:15},this),n.jsxDEV("span",{children:e.label},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:272,columnNumber:15},this)]},e.key,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:262,columnNumber:13},this))},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:255,columnNumber:9},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:254,columnNumber:7},this),n.jsxDEV("div",{className:"space-y-4",children:["overview"===r&&n.jsxDEV(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[n.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxDEV(l,{children:n.jsxDEV(d,{className:"p-4",children:n.jsxDEV("div",{className:"flex items-center justify-between",children:[n.jsxDEV("div",{children:[n.jsxDEV("p",{className:"text-xs font-medium text-gray-600",children:"Total items"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:292,columnNumber:23},this),n.jsxDEV("p",{className:"text-xl font-bold text-gray-900",children:I?.total_items||0},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:293,columnNumber:23},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:291,columnNumber:21},this),n.jsxDEV(g,{className:"h-6 w-6 text-blue-600"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:295,columnNumber:21},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:290,columnNumber:19},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:289,columnNumber:17},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:288,columnNumber:15},this),n.jsxDEV(l,{children:n.jsxDEV(d,{className:"p-4",children:n.jsxDEV("div",{className:"flex items-center justify-between",children:[n.jsxDEV("div",{children:[n.jsxDEV("p",{className:"text-xs font-medium text-gray-600",children:"Total submissions"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:304,columnNumber:23},this),n.jsxDEV("p",{className:"text-xl font-bold text-gray-900",children:I?.total_submissions||0},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:305,columnNumber:23},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:303,columnNumber:21},this),n.jsxDEV(x,{className:"h-6 w-6 text-green-600"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:309,columnNumber:21},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:302,columnNumber:19},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:301,columnNumber:17},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:300,columnNumber:15},this),n.jsxDEV(l,{children:n.jsxDEV(d,{className:"p-4",children:n.jsxDEV("div",{className:"flex items-center justify-between",children:[n.jsxDEV("div",{children:[n.jsxDEV("p",{className:"text-xs font-medium text-gray-600",children:"Pending reviews"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:318,columnNumber:23},this),n.jsxDEV("p",{className:"text-xl font-bold text-gray-900",children:I?.pending_reviews||0},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:319,columnNumber:23},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:317,columnNumber:21},this),n.jsxDEV(h,{className:"h-6 w-6 text-yellow-600"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:323,columnNumber:21},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:316,columnNumber:19},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:315,columnNumber:17},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:314,columnNumber:15},this),n.jsxDEV(l,{children:n.jsxDEV(d,{className:"p-4",children:n.jsxDEV("div",{className:"flex items-center justify-between",children:[n.jsxDEV("div",{children:[n.jsxDEV("p",{className:"text-xs font-medium text-gray-600",children:"Approved"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:332,columnNumber:23},this),n.jsxDEV("p",{className:"text-xl font-bold text-gray-900",children:I?.approved_submissions||0},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:333,columnNumber:23},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:331,columnNumber:21},this),n.jsxDEV(f,{className:"h-6 w-6 text-green-600"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:337,columnNumber:21},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:330,columnNumber:19},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:329,columnNumber:17},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:328,columnNumber:15},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:287,columnNumber:13},this),n.jsxDEV(l,{children:[n.jsxDEV(u,{className:"pb-2",children:n.jsxDEV("h3",{className:"text-sm font-semibold text-gray-900",children:"Recent submissions"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:346,columnNumber:17},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:345,columnNumber:15},this),n.jsxDEV(d,{className:"pt-2",children:0===V.length?n.jsxDEV("p",{className:"text-gray-500 text-center py-4 text-xs",children:"No submissions yet"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:350,columnNumber:19},this):n.jsxDEV("div",{className:"space-y-2",children:V.slice(0,5).map(e=>n.jsxDEV("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[n.jsxDEV("div",{className:"flex items-center space-x-2",children:[n.jsxDEV("div",{className:"flex-shrink-0",children:n.jsxDEV(x,{className:"h-4 w-4 text-gray-400"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:360,columnNumber:29},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:359,columnNumber:27},this),n.jsxDEV("div",{children:[n.jsxDEV("p",{className:"text-xs font-medium text-gray-900",children:e.user?.full_name||"Unknown user"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:363,columnNumber:29},this),n.jsxDEV("p",{className:"text-xs text-gray-500",children:e.compliance_item?.title||"Unknown item"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:366,columnNumber:29},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:362,columnNumber:27},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:358,columnNumber:25},this),n.jsxDEV("span",{className:"text-xs px-2 py-1 rounded font-medium "+("approved"===e.status?"bg-green-100 text-green-800 border border-green-200":"rejected"===e.status?"bg-red-100 text-red-800 border border-red-200":"bg-yellow-100 text-yellow-800 border border-yellow-200"),children:e.status?.charAt(0).toUpperCase()+e.status?.slice(1).toLowerCase()},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:371,columnNumber:25},this)]},e.id,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:354,columnNumber:23},this))},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:352,columnNumber:19},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:348,columnNumber:15},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:344,columnNumber:13},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:281,columnNumber:11},this),"items"===r&&n.jsxDEV(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[n.jsxDEV("div",{className:"flex items-center justify-between",children:n.jsxDEV(c,{className:"h-7 px-3 text-xs rounded",onClick:()=>{$("add"),L(null),J({title:"",description:"",target_role:"teacher",type:"form_submission",has_form:!1,is_mandatory:!1,due_date:""}),F(!0)},children:[n.jsxDEV(y,{className:"h-3 w-3 mr-1"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:400,columnNumber:17},this),"Add item"]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:399,columnNumber:15},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:398,columnNumber:13},this),n.jsxDEV(l,{children:n.jsxDEV(d,{className:"p-4",children:0===M.length?n.jsxDEV("p",{className:"text-gray-500 text-center py-4 text-xs",children:"No compliance items found"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:408,columnNumber:19},this):n.jsxDEV("div",{className:"space-y-3",children:[M.slice((R-1)*Y,R*Y).map(e=>n.jsxDEV("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded",children:[n.jsxDEV("div",{className:"flex-1",children:[n.jsxDEV("div",{className:"flex items-center space-x-2",children:[n.jsxDEV("h3",{className:"font-medium text-gray-900 text-sm",children:e.title},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:422,columnNumber:31},this),n.jsxDEV("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded border border-blue-200 font-medium",children:e.target_role?.charAt(0).toUpperCase()+e.target_role?.slice(1).toLowerCase()||"Unknown"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:423,columnNumber:31},this),e.is_mandatory&&n.jsxDEV("span",{className:"bg-red-100 text-red-800 text-xs px-2 py-1 rounded border border-red-200 font-medium",children:"Mandatory"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:428,columnNumber:33},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:421,columnNumber:29},this),n.jsxDEV("p",{className:"text-xs text-gray-600 mt-1",children:e.description},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:433,columnNumber:29},this),e.due_date&&n.jsxDEV("p",{className:"text-xs text-gray-500 mt-0.5",children:["Due: ",new Date(e.due_date).toLocaleDateString()]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:435,columnNumber:31},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:420,columnNumber:27},this),n.jsxDEV("div",{className:"flex items-center space-x-1.5",children:[n.jsxDEV("button",{className:"h-7 w-7 p-0 rounded border border-gray-300 bg-white text-gray-700 hover:bg-blue-50 hover:border-blue-300 transition-all duration-200 flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1",onClick:()=>(e=>{$("view"),L(e),F(!0)})(e),title:"View",children:n.jsxDEV(j,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:446,columnNumber:31},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:441,columnNumber:29},this),n.jsxDEV("button",{className:"h-7 w-7 p-0 rounded border border-gray-300 bg-white text-gray-700 hover:bg-yellow-50 hover:border-yellow-300 transition-all duration-200 flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-1",onClick:()=>Q(e),title:"Edit",children:n.jsxDEV(b,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:453,columnNumber:31},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:448,columnNumber:29},this),n.jsxDEV("button",{className:"h-7 w-7 p-0 rounded border border-gray-300 bg-white text-gray-700 hover:bg-red-50 hover:border-red-300 transition-all duration-200 flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-1",onClick:()=>(e=>{L(e),q(!0)})(e),title:"Delete",children:n.jsxDEV(S,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:460,columnNumber:31},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:455,columnNumber:29},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:440,columnNumber:27},this)]},e.id,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:416,columnNumber:25},this)),M.length>Y&&n.jsxDEV("div",{className:"flex items-center justify-between mt-4 pt-4 border-t",children:[n.jsxDEV("div",{className:"text-xs text-gray-600",children:["Showing ",(R-1)*Y+1," to"," ",Math.min(R*Y,M.length)," of ",M.length]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:467,columnNumber:25},this),n.jsxDEV("div",{className:"flex gap-1",children:[n.jsxDEV(c,{size:"sm",variant:"ghost",onClick:()=>B(Math.max(1,R-1)),disabled:1===R,children:"← Prev"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:472,columnNumber:27},this),n.jsxDEV(c,{size:"sm",variant:"ghost",onClick:()=>B(Math.min(Math.ceil(M.length/Y),R+1)),disabled:R===Math.ceil(M.length/Y),children:"Next →"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:480,columnNumber:27},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:471,columnNumber:25},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:466,columnNumber:23},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:412,columnNumber:19},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:406,columnNumber:15},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:405,columnNumber:13},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:393,columnNumber:11},this),"submissions"===r&&n.jsxDEV(k,{submissions:V,onReview:K},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:503,columnNumber:11},this),"forms"===r&&n.jsxDEV(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:n.jsxDEV(l,{children:n.jsxDEV(d,{className:"p-4",children:n.jsxDEV("p",{className:"text-gray-500 text-center py-4 text-xs",children:"Forms management coming soon"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:514,columnNumber:17},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:513,columnNumber:15},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:512,columnNumber:13},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:507,columnNumber:11},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:279,columnNumber:7},this),O&&A&&n.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxDEV(i.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full mx-4",children:n.jsxDEV("div",{className:"flex items-start space-x-3",children:[n.jsxDEV("div",{className:"flex-shrink-0",children:n.jsxDEV(p,{className:"h-6 w-6 text-red-600"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:533,columnNumber:17},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:532,columnNumber:15},this),n.jsxDEV("div",{className:"flex-1",children:[n.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Delete compliance item"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:536,columnNumber:17},this),n.jsxDEV("p",{className:"text-sm text-gray-600 mb-4",children:['Are you sure you want to delete "',n.jsxDEV("strong",{children:A.title},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:538,columnNumber:52},this),'"? This action cannot be undone.']},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:537,columnNumber:17},this),n.jsxDEV("div",{className:"flex justify-end space-x-2",children:[n.jsxDEV(c,{variant:"outline",className:"h-8 px-3 text-xs rounded",onClick:()=>{q(!1),L(null)},children:"Cancel"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:542,columnNumber:19},this),n.jsxDEV(c,{className:"h-8 px-3 text-xs rounded bg-red-600 hover:bg-red-700 text-white",onClick:async()=>{if(A)try{await async function(e){try{const{error:a}=await m.from("compliance_items").delete().eq("id",e);if(a)throw a;t.invalidatePattern("compliance:.*")}catch(W){throw console.error("Error deleting compliance item:",W),W}}(A.id),a.success(`Successfully deleted "${A.title}"`),q(!1),L(null),await K()}catch(e){console.error("Error deleting item:",e),a.error("Failed to delete item")}},children:"Delete"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:552,columnNumber:19},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:541,columnNumber:17},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:535,columnNumber:15},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:531,columnNumber:13},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:526,columnNumber:11},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:525,columnNumber:9},this),z&&n.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxDEV(i.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-xl p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[n.jsxDEV("div",{className:"flex justify-between items-center mb-4",children:[n.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"add"===U?"Add compliance item":"edit"===U?"Edit compliance item":"View compliance item"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:574,columnNumber:15},this),n.jsxDEV("button",{onClick:()=>{F(!1),L(null)},className:"text-gray-400 hover:text-gray-600",children:n.jsxDEV("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:589,columnNumber:19},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:588,columnNumber:17},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:581,columnNumber:15},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:573,columnNumber:13},this),n.jsxDEV("div",{className:"space-y-4",children:"view"===U&&A?n.jsxDEV("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[n.jsxDEV("div",{className:"border-b border-gray-200 pb-3",children:[n.jsxDEV("h4",{className:"font-semibold text-gray-900 text-base",children:A.title},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:603,columnNumber:21},this),n.jsxDEV("div",{className:"flex items-center space-x-2 mt-2",children:[n.jsxDEV("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded border border-blue-200 font-medium",children:A.target_role?.charAt(0).toUpperCase()+A.target_role?.slice(1).toLowerCase()},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:605,columnNumber:23},this),n.jsxDEV("span",{className:"bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded border border-gray-200 font-medium",children:["form_submission"===A.type&&"Form Submission","verification"===A.type&&"Verification","document_upload"===A.type&&"Document Upload"]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:609,columnNumber:23},this),A.is_mandatory&&n.jsxDEV("span",{className:"bg-red-100 text-red-800 text-xs px-2 py-1 rounded border border-red-200 font-medium",children:"Mandatory"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:615,columnNumber:25},this),A.has_form&&n.jsxDEV("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded border border-green-200 font-medium",children:"Has Form"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:620,columnNumber:25},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:604,columnNumber:21},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:602,columnNumber:19},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:628,columnNumber:21},this),n.jsxDEV("p",{className:"text-sm text-gray-900 leading-relaxed",children:A.description},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:631,columnNumber:21},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:627,columnNumber:19},this),A.due_date&&n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Due date"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:638,columnNumber:23},this),n.jsxDEV("p",{className:"text-sm text-gray-900",children:new Date(A.due_date).toLocaleDateString()},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:641,columnNumber:23},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:637,columnNumber:21},this),n.jsxDEV("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200",children:[n.jsxDEV("div",{className:"text-xs text-gray-500",children:["Created: ",new Date(A.created_at).toLocaleDateString()]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:648,columnNumber:21},this),n.jsxDEV("div",{className:"flex space-x-2",children:[n.jsxDEV("button",{className:"h-8 px-3 text-xs rounded border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>{F(!1),L(null)},children:"Close"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:652,columnNumber:23},this),n.jsxDEV("button",{className:"h-8 px-3 text-xs rounded bg-blue-600 text-white hover:bg-blue-700 transition-colors",onClick:()=>{A&&Q(A)},children:"Edit"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:661,columnNumber:23},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:651,columnNumber:21},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:647,columnNumber:19},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:601,columnNumber:17},this):n.jsxDEV("form",{className:"space-y-4",onSubmit:e=>{e.preventDefault(),X()},children:[n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Title"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:683,columnNumber:21},this),n.jsxDEV("input",{type:"text",value:G.title,onChange:e=>J({...G,title:e.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter compliance item title",required:!0},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:684,columnNumber:21},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:682,columnNumber:19},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:695,columnNumber:21},this),n.jsxDEV("textarea",{value:G.description,onChange:e=>J({...G,description:e.target.value}),rows:3,className:"w-full px-3 py-2 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Enter description",required:!0},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:698,columnNumber:21},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:694,columnNumber:19},this),n.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Target role"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:710,columnNumber:23},this),n.jsxDEV("select",{value:G.target_role,onChange:e=>J({...G,target_role:e.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsxDEV("option",{value:"teacher",children:"Teacher"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:723,columnNumber:25},this),n.jsxDEV("option",{value:"parent",children:"Parent"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:724,columnNumber:25},this),n.jsxDEV("option",{value:"student",children:"Student"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:725,columnNumber:25},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:713,columnNumber:23},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:709,columnNumber:21},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Type"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:730,columnNumber:23},this),n.jsxDEV("select",{value:G.type,onChange:e=>J({...G,type:e.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsxDEV("option",{value:"form_submission",children:"Form Submission"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:738,columnNumber:25},this),n.jsxDEV("option",{value:"verification",children:"Verification"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:739,columnNumber:25},this),n.jsxDEV("option",{value:"document_upload",children:"Document Upload"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:740,columnNumber:25},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:731,columnNumber:23},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:729,columnNumber:21},this),n.jsxDEV("div",{className:"pt-2",children:[n.jsxDEV("div",{className:"flex items-center",children:[n.jsxDEV("input",{type:"checkbox",id:"has_form",checked:G.has_form,onChange:e=>J({...G,has_form:e.target.checked}),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:746,columnNumber:25},this),n.jsxDEV("label",{htmlFor:"has_form",className:"text-sm font-medium text-gray-700",children:"Has Form"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:753,columnNumber:25},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:745,columnNumber:23},this),n.jsxDEV("p",{className:"text-xs text-gray-500 mt-1 ml-6",children:"Note: Only check this if a form is created and linked. Otherwise, users can use the checkbox to mark completion."},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:757,columnNumber:23},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:744,columnNumber:21},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:708,columnNumber:19},this),n.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Due date (optional)"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:766,columnNumber:23},this),n.jsxDEV("input",{type:"date",value:G.due_date,onChange:e=>J({...G,due_date:e.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:769,columnNumber:23},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:765,columnNumber:21},this),n.jsxDEV("div",{className:"flex items-center pt-6",children:[n.jsxDEV("input",{type:"checkbox",id:"is_mandatory",checked:G.is_mandatory,onChange:e=>J({...G,is_mandatory:e.target.checked}),className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:778,columnNumber:23},this),n.jsxDEV("label",{htmlFor:"is_mandatory",className:"ml-2 text-xs font-medium text-gray-700",children:"Mandatory"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:787,columnNumber:23},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:777,columnNumber:21},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:764,columnNumber:19},this),n.jsxDEV("div",{className:"flex justify-end space-x-2 pt-4 border-t border-gray-200",children:[n.jsxDEV("button",{type:"button",className:"h-8 px-3 text-xs rounded border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>{F(!1),L(null)},children:"Cancel"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:797,columnNumber:21},this),n.jsxDEV("button",{type:"submit",className:"h-8 px-3 text-xs rounded bg-blue-600 text-white hover:bg-blue-700 transition-colors",children:"add"===U?"Create item":"Update item"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:807,columnNumber:21},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:796,columnNumber:19},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:675,columnNumber:17},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:599,columnNumber:13},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:568,columnNumber:11},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:567,columnNumber:9},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/ComplianceManagement.tsx",lineNumber:252,columnNumber:5},this)}},Symbol.toStringTag,{value:"Module"})),q=Object.freeze(Object.defineProperty({__proto__:null,default:()=>n.jsxDEV(v,{title:"Invoice Management",description:"Comprehensive invoice management system for tracking and managing all invoices. Create, send, and track invoices with ease.",icon:g},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/InvoiceManagement.tsx",lineNumber:7,columnNumber:5},void 0)},Symbol.toStringTag,{value:"Module"})),A=Object.freeze(Object.defineProperty({__proto__:null,default:()=>n.jsxDEV(v,{title:"Payment Management",description:"Secure payment processing and management system. Handle transactions, refunds, and payment records efficiently.",icon:D},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/PaymentManagement.tsx",lineNumber:7,columnNumber:5},void 0)},Symbol.toStringTag,{value:"Module"}));export{O as C,q as I,A as P,M as a,T as b,H as c,W as d,w as e,E as g,_ as m,I as s};
