import{q as e,r as i,j as t}from"./vendor-react-DCALsXS8.js";import{s as r}from"./admin-analytics-BUJUGyzI.js";import"./vendor-misc-Dxs4t1yE.js";import"./vendor-ui-Bmdc4IWn.js";import"./admin-misc-9vir4T6x.js";import"./admin-assignments-Cx7DOfUV.js";import"./admin-batch-BFzGO27E.js";import"./admin-content-LS_eLhwS.js";import"./admin-resources-DlJorqJM.js";import"./vendor-jspdf-DcFMtNGo.js";import"./vendor-pdfjs-D7jtXKOJ.js";import"./vendor-forms-B0kmz9hl.js";import"./admin-finance-3P7fiBd4.js";import"./vendor-supabase-EmK__MhW.js";function s(){const{certificateNumber:s}=e(),[c,a]=i.useState(null),[o,n]=i.useState(!0),[m,l]=i.useState(null);return i.useEffect(()=>{(async()=>{if(!s)return l("Certificate number not provided"),void n(!1);try{if(3!==s.replace(".pdf","").split("-").length)return l("Invalid certificate number format"),void n(!1);const{data:i,error:t}=await r.from("certificates").select("\n            *,\n            courses(*),\n            profiles!certificates_student_id_fkey(*)\n          ").eq("certificate_number",s);if(t)return console.error("Error fetching certificate:",t),l("Error loading certificate data"),void n(!1);if(!i||0===i.length)return l("Certificate not found"),void n(!1);const c=i[0],o=c.profiles?decryptProfileFields(c.profiles):null,m=c.courses;let f="Standard Certificate";if(c.template_id)try{const{data:e}=await r.from("certificate_templates").select("name").eq("id",c.template_id).single();e&&(f=e.name)}catch(e){console.warn("Could not fetch template name:",e)}a({student_name:o?.full_name||"Student Name",course_title:m?.title||"Course Title",certificate_number:s.replace(".pdf",""),verification_code:c.verification_code||"N/A",completion_date:c.issue_date||c.completion_date,template_name:f})}catch(i){console.error("Error:",i),l("Failed to load certificate")}finally{n(!1)}})()},[s]),o?t.jsxDEV("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:t.jsxDEV("div",{className:"text-center",children:[t.jsxDEV("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:108,columnNumber:11},this),t.jsxDEV("p",{className:"mt-4 text-gray-600",children:["Loading certificate: ",s]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:109,columnNumber:11},this),t.jsxDEV("p",{className:"mt-2 text-sm text-gray-500",children:"Certificate viewer is working!"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:110,columnNumber:11},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:107,columnNumber:9},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:106,columnNumber:7},this):m?t.jsxDEV("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:t.jsxDEV("div",{className:"text-center",children:t.jsxDEV("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[t.jsxDEV("p",{className:"font-bold",children:"Error"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:121,columnNumber:13},this),t.jsxDEV("p",{children:m},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:122,columnNumber:13},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:120,columnNumber:11},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:119,columnNumber:9},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:118,columnNumber:7},this):c?t.jsxDEV("div",{className:"min-h-screen bg-gray-100 py-8",children:t.jsxDEV("div",{className:"max-w-4xl mx-auto px-4",children:[t.jsxDEV("div",{className:"bg-white shadow-2xl rounded-lg overflow-hidden",children:[t.jsxDEV("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 px-8 py-6 text-white text-center",children:[t.jsxDEV("h1",{className:"text-3xl font-bold mb-2",children:"eYogi University"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:146,columnNumber:13},this),t.jsxDEV("h2",{className:"text-xl font-semibold",children:"Certificate of Completion"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:147,columnNumber:13},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:145,columnNumber:11},this),t.jsxDEV("div",{className:"px-8 py-12",children:[t.jsxDEV("div",{className:"text-center mb-8",children:[t.jsxDEV("p",{className:"text-lg text-gray-600 mb-6",children:"This is to certify that"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:153,columnNumber:15},this),t.jsxDEV("h3",{className:"text-4xl font-bold text-gray-800 mb-6 border-b-2 border-gray-300 pb-2 inline-block",children:c.student_name},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:154,columnNumber:15},this),t.jsxDEV("p",{className:"text-lg text-gray-600 mb-6",children:"has successfully completed the course"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:157,columnNumber:15},this),t.jsxDEV("h4",{className:"text-2xl font-semibold text-blue-600 mb-8",children:c.course_title},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:158,columnNumber:15},this),t.jsxDEV("p",{className:"text-gray-600 mb-6",children:["on ",new Date(c.completion_date).toLocaleDateString()]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:161,columnNumber:15},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:152,columnNumber:13},this),t.jsxDEV("div",{className:"flex justify-between items-center border-t pt-6",children:[t.jsxDEV("div",{className:"text-left",children:[t.jsxDEV("p",{className:"text-sm text-gray-600",children:"Certificate Number:"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:169,columnNumber:17},this),t.jsxDEV("p",{className:"font-semibold",children:c.certificate_number},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:170,columnNumber:17},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:168,columnNumber:15},this),t.jsxDEV("div",{className:"text-center",children:[t.jsxDEV("p",{className:"text-sm text-gray-600",children:"Template:"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:173,columnNumber:17},this),t.jsxDEV("p",{className:"font-semibold",children:c.template_name},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:174,columnNumber:17},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:172,columnNumber:15},this),t.jsxDEV("div",{className:"text-right",children:[t.jsxDEV("p",{className:"text-sm text-gray-600",children:"Verification Code:"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:177,columnNumber:17},this),t.jsxDEV("p",{className:"font-semibold",children:c.verification_code},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:178,columnNumber:17},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:176,columnNumber:15},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:167,columnNumber:13},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:151,columnNumber:11},this),t.jsxDEV("div",{className:"bg-gray-50 px-8 py-4 text-center text-sm text-gray-600",children:[t.jsxDEV("p",{children:"This certificate verifies successful completion of the course."},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:185,columnNumber:13},this),t.jsxDEV("p",{className:"mt-1",children:"Verify authenticity at: ssh.eyogigurukul.com"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:186,columnNumber:13},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:184,columnNumber:11},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:143,columnNumber:9},this),t.jsxDEV("div",{className:"text-center mt-6",children:t.jsxDEV("button",{onClick:()=>window.print(),className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded inline-flex items-center",children:[t.jsxDEV("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:197,columnNumber:15},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:196,columnNumber:13},this),"Print Certificate"]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:192,columnNumber:11},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:191,columnNumber:9},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:141,columnNumber:7},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:140,columnNumber:5},this):t.jsxDEV("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:t.jsxDEV("div",{className:"text-center",children:t.jsxDEV("p",{className:"text-gray-600",children:"Certificate data not available"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:133,columnNumber:11},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:132,columnNumber:9},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/certificates/CertificateViewer.tsx",lineNumber:131,columnNumber:7},this)}export{s as default};
