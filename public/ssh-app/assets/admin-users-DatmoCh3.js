import{j as e,r as n,z as s}from"./vendor-react-DCALsXS8.js";import{an as i,ao as a,aH as m,e as r,N as o,O as t,h as c,i as l,j as d,ar as u,aQ as N,au as g,aR as x,aS as b,aT as p,a6 as h,aU as v,F as S,aV as j,aW as f,E as D,aX as P,aY as y,at as w,aZ as I,a_ as T}from"./vendor-ui-Bmdc4IWn.js";import{s as E,a as V,h as W,b as H,n as A,r as M,W as U,B as C,f as _,g as k}from"./admin-analytics-BUJUGyzI.js";import{g as L}from"./admin-batch-BFzGO27E.js";import{U as O,I as $,J as F,s as R}from"./admin-misc-9vir4T6x.js";import{a as q,f as B}from"./admin-assignments-Cx7DOfUV.js";const z=({currentPage:n,totalPages:s,totalItems:m,itemsPerPage:r,onPageChange:o,onItemsPerPageChange:t,showItemsPerPage:c=!0,itemsPerPageOptions:l=[10,25,50,100]})=>{const d=(n-1)*r+1,u=Math.min(n*r,m);return s<=1?null:e.jsxDEV("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:e.jsxDEV("div",{className:"flex-1 flex justify-between items-center",children:[e.jsxDEV("div",{className:"flex items-center text-sm text-gray-700",children:[e.jsxDEV("p",{children:["Showing ",e.jsxDEV("span",{className:"font-medium",children:d},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/common/Pagination.tsx",lineNumber:91,columnNumber:21},void 0)," to"," ",e.jsxDEV("span",{className:"font-medium",children:u},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/common/Pagination.tsx",lineNumber:92,columnNumber:13},void 0)," of"," ",e.jsxDEV("span",{className:"font-medium",children:m},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/common/Pagination.tsx",lineNumber:93,columnNumber:13},void 0)," results"]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/common/Pagination.tsx",lineNumber:90,columnNumber:11},void 0),c&&t&&e.jsxDEV("div",{className:"ml-4 flex items-center",children:[e.jsxDEV("label",{htmlFor:"itemsPerPage",className:"mr-2 text-sm text-gray-700",children:"Show:"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/common/Pagination.tsx",lineNumber:97,columnNumber:15},void 0),e.jsxDEV("select",{id:"itemsPerPage",value:r,onChange:e=>t(Number(e.target.value)),className:"px-2 py-1 border border-gray-300 rounded text-sm focus:ring-blue-500 focus:border-blue-500",children:l.map(n=>e.jsxDEV("option",{value:n,children:n},n,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/common/Pagination.tsx",lineNumber:107,columnNumber:19},void 0))},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/common/Pagination.tsx",lineNumber:100,columnNumber:15},void 0)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/common/Pagination.tsx",lineNumber:96,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/common/Pagination.tsx",lineNumber:89,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex items-center space-x-1",children:[e.jsxDEV("button",{onClick:()=>{n>1&&o(n-1)},disabled:1===n,className:"relative inline-flex items-center px-3 py-2 rounded-l-md border text-sm font-medium "+(1===n?"bg-gray-100 border-gray-300 text-gray-400 cursor-not-allowed":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50 cursor-pointer"),children:[e.jsxDEV(i,{className:"h-4 w-4"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/common/Pagination.tsx",lineNumber:128,columnNumber:13},void 0),e.jsxDEV("span",{className:"ml-1 hidden sm:inline",children:"Previous"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/common/Pagination.tsx",lineNumber:129,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/common/Pagination.tsx",lineNumber:119,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex",children:(()=>{const e=[];if(s<=5)for(let n=1;n<=s;n++)e.push(n);else if(n<=3){for(let n=1;n<=4;n++)e.push(n);e.push("..."),e.push(s)}else if(n>=s-2){e.push(1),e.push("...");for(let n=s-3;n<=s;n++)e.push(n)}else{e.push(1),e.push("...");for(let s=n-1;s<=n+1;s++)e.push(s);e.push("..."),e.push(s)}return e})().map((s,i)=>e.jsxDEV("button",{onClick:()=>(e=>{"number"==typeof e&&e!==n&&o(e)})(s),disabled:"..."===s,className:"relative inline-flex items-center px-3 py-2 border text-sm font-medium "+(s===n?"z-10 bg-blue-50 border-blue-500 text-blue-600":"..."===s?"bg-white border-gray-300 text-gray-700 cursor-default":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50 cursor-pointer"),children:s},i,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/common/Pagination.tsx",lineNumber:135,columnNumber:15},void 0))},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/common/Pagination.tsx",lineNumber:133,columnNumber:11},void 0),e.jsxDEV("button",{onClick:()=>{n<s&&o(n+1)},disabled:n===s,className:"relative inline-flex items-center px-3 py-2 rounded-r-md border text-sm font-medium "+(n===s?"bg-gray-100 border-gray-300 text-gray-400 cursor-not-allowed":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50 cursor-pointer"),children:[e.jsxDEV("span",{className:"mr-1 hidden sm:inline",children:"Next"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/common/Pagination.tsx",lineNumber:162,columnNumber:13},void 0),e.jsxDEV(a,{className:"h-4 w-4"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/common/Pagination.tsx",lineNumber:163,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/common/Pagination.tsx",lineNumber:153,columnNumber:11},void 0)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/common/Pagination.tsx",lineNumber:117,columnNumber:9},void 0)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/common/Pagination.tsx",lineNumber:87,columnNumber:7},void 0)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/common/Pagination.tsx",lineNumber:86,columnNumber:5},void 0)},Y=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[i,a]=n.useState([]),[u,N]=n.useState(!0),[g,x]=n.useState(""),[b,p]=n.useState("all"),[h,v]=n.useState("all"),[S,j]=n.useState(!1),[f,D]=n.useState(null),[P,y]=n.useState("create"),[w,I]=n.useState(1),[T,H]=n.useState(25),[A,M]=n.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{}}),{user:U}=q(),C=n.useCallback(async()=>{try{N(!0);const{data:e,error:n}=await E.from("profiles").select("*").order("created_at",{ascending:!1});if(n)return void s.error("Failed to load users");const i=(e||[]).map(e=>V(e)).filter(e=>e.full_name&&e.email&&e.role&&e.id!==U?.id);a(i)}catch{s.error("Failed to load users")}finally{N(!1)}},[U?.id]);n.useEffect(()=>{C()},[C]);const _=i.filter(e=>{const n=e.full_name.toLowerCase().includes(g.toLowerCase())||e.email.toLowerCase().includes(g.toLowerCase())||e.student_id&&e.student_id.toLowerCase().includes(g.toLowerCase()),s="all"===b||"admin"===b&&("admin"===e.role||"business_admin"===e.role||"super_admin"===e.role)||e.role===b,i="all"===h||e.status===h||"pending_verification"===h&&"pending_verification"===e.status;return n&&s&&i}),k=Math.ceil(_.length/T),R=(w-1)*T,Y=R+T,G=_.slice(R,Y);n.useEffect(()=>{I(1)},[g,b,h]);const Q=e=>{switch(e){case"super_admin":return"bg-red-100 text-red-800";case"admin":return"bg-purple-100 text-purple-800";case"teacher":return"bg-blue-100 text-blue-800";case"student":return"bg-green-100 text-green-800";case"parent":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},J=e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"inactive":default:return"bg-gray-100 text-gray-800";case"suspended":return"bg-red-100 text-red-800";case"pending_activation":case"pending_verification":return"bg-yellow-100 text-yellow-800"}},X=e=>{if("pending_verification"===e)return"Pending Activation";return e.replace("_"," ").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" ")},Z=e=>"super_admin"===e.role||e.id===U?.id;return u?e.jsxDEV("div",{className:"flex items-center justify-center min-h-96",children:e.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:267,columnNumber:9},void 0)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:266,columnNumber:7},void 0):e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxDEV("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxDEV("div",{className:"flex items-center text-sm text-gray-500 min-w-fit",children:[e.jsxDEV(m,{className:"h-4 w-4 mr-1"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:278,columnNumber:13},void 0),_.length," of ",i.length," users"]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:277,columnNumber:11},void 0),e.jsxDEV("div",{className:"relative flex-1 min-w-64",children:[e.jsxDEV(r,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:283,columnNumber:13},void 0),e.jsxDEV("input",{type:"text",placeholder:"Search users...",value:g,onChange:e=>x(e.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:284,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:282,columnNumber:11},void 0),e.jsxDEV("div",{className:"min-w-fit",children:e.jsxDEV("select",{value:b,onChange:e=>p(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[e.jsxDEV("option",{value:"all",children:"All Roles"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:299,columnNumber:15},void 0),e.jsxDEV("option",{value:"student",children:"Students"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:300,columnNumber:15},void 0),e.jsxDEV("option",{value:"teacher",children:"Teachers"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:301,columnNumber:15},void 0),e.jsxDEV("option",{value:"admin",children:"Admins"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:302,columnNumber:15},void 0),e.jsxDEV("option",{value:"parent",children:"Parents"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:303,columnNumber:15},void 0)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:294,columnNumber:13},void 0)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:293,columnNumber:11},void 0),e.jsxDEV("div",{className:"min-w-fit",children:e.jsxDEV("select",{value:h,onChange:e=>v(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[e.jsxDEV("option",{value:"all",children:"All Statuses"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:313,columnNumber:15},void 0),e.jsxDEV("option",{value:"active",children:"Active"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:314,columnNumber:15},void 0),e.jsxDEV("option",{value:"inactive",children:"Inactive"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:315,columnNumber:15},void 0),e.jsxDEV("option",{value:"suspended",children:"Suspended"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:316,columnNumber:15},void 0),e.jsxDEV("option",{value:"pending_verification",children:"Pending Verification"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:317,columnNumber:15},void 0)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:308,columnNumber:13},void 0)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:307,columnNumber:11},void 0),e.jsxDEV("button",{onClick:()=>{D(null),y("create"),j(!0)},className:"inline-flex items-center px-3 py-1.5 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 cursor-pointer min-w-fit",style:{cursor:"pointer"},children:[e.jsxDEV(o,{className:"h-4 w-4 mr-1.5"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:326,columnNumber:13},void 0),"Add User"]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:321,columnNumber:11},void 0)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:275,columnNumber:9},void 0)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:274,columnNumber:7},void 0),e.jsxDEV("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200 overflow-hidden",children:[e.jsxDEV("div",{className:"overflow-x-auto",children:e.jsxDEV("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsxDEV("thead",{className:"bg-gray-50",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:337,columnNumber:17},void 0),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:340,columnNumber:17},void 0),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:343,columnNumber:17},void 0),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"student"===b?"Student ID":"all"===b?"ID / Role Info":"User ID"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:346,columnNumber:17},void 0),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:353,columnNumber:17},void 0),e.jsxDEV("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:356,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:336,columnNumber:15},void 0)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:335,columnNumber:13},void 0),e.jsxDEV("tbody",{className:"bg-white divide-y divide-gray-200",children:G.map(n=>{return e.jsxDEV("tr",{className:"hover:bg-gray-50",children:[e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsxDEV("div",{className:"h-10 w-10 rounded-full bg-blue-500 flex items-center justify-center",children:e.jsxDEV("span",{className:"text-white text-sm font-medium",children:n.full_name.charAt(0)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:368,columnNumber:27},void 0)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:367,columnNumber:25},void 0)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:366,columnNumber:23},void 0),e.jsxDEV("div",{className:"ml-4",children:[e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV("span",{className:"text-sm font-medium text-gray-900",children:n.full_name},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:375,columnNumber:27},void 0),Z(n)&&e.jsxDEV(t,{className:"h-4 w-4 text-red-500 ml-2",title:"Protected user"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:379,columnNumber:29},void 0)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:374,columnNumber:25},void 0),e.jsxDEV("div",{className:"text-sm text-gray-500",children:n.email},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:385,columnNumber:25},void 0)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:373,columnNumber:23},void 0)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:365,columnNumber:21},void 0)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:364,columnNumber:19},void 0),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxDEV("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded ${Q(n.role)}`,children:(a=n.role,a.replace("_"," ").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "))},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:390,columnNumber:21},void 0)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:389,columnNumber:19},void 0),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxDEV("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded ${J(n.status)}`,children:X(n.status)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:397,columnNumber:21},void 0)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:396,columnNumber:19},void 0),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"student"===n.role&&n.student_id||"-"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:403,columnNumber:19},void 0),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(n.created_at).toLocaleDateString()},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:406,columnNumber:19},void 0),e.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxDEV("div",{className:"flex justify-end space-x-2",children:["pending_verification"===n.status&&e.jsxDEV("button",{onClick:()=>(async(e,n)=>{try{const{error:i}=await E.from("profiles").update({status:"active"}).eq("id",e);if(i)return void s.error("Failed to activate user");s.success(`${n} has been activated successfully`),C()}catch{s.error("Failed to activate user")}})(n.id,n.full_name),className:"text-green-600 hover:text-green-900 p-1 cursor-pointer",title:"Activate user",style:{cursor:"pointer"},children:e.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-4 w-4",children:e.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:426,columnNumber:29},void 0)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:418,columnNumber:27},void 0)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:412,columnNumber:25},void 0),e.jsxDEV("button",{onClick:()=>(async e=>{const n=await B(e.id);D(n||e),y("view"),j(!0)})(n),className:"text-gray-600 hover:text-gray-900 p-1 cursor-pointer",title:"View user",style:{cursor:"pointer"},children:e.jsxDEV(c,{className:"h-4 w-4"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:440,columnNumber:25},void 0)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:434,columnNumber:23},void 0),e.jsxDEV("button",{onClick:()=>(async e=>{if("super_admin"===e.role&&U?.id!==e.id)return void s.error("Cannot edit super admin users");const n=await B(e.id);D(n||e),y("edit"),j(!0)})(n),disabled:Z(n)&&U?.id!==n.id,className:"p-1 "+(Z(n)&&U?.id!==n.id?"text-gray-300 cursor-not-allowed":"text-blue-600 hover:text-blue-900 cursor-pointer"),title:Z(n)?"Protected user":"Edit user",style:{cursor:Z(n)&&U?.id!==n.id?"not-allowed":"pointer"},children:e.jsxDEV(l,{className:"h-4 w-4"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:458,columnNumber:25},void 0)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:442,columnNumber:23},void 0),e.jsxDEV("button",{onClick:()=>(async(e,n)=>{if("super_admin"===n)return void s.error("Cannot delete super admin users");const a=i.find(n=>n.id===e);a&&M({isOpen:!0,title:"Delete User",message:`Are you sure you want to delete "${a.full_name}"?\n\nThis will also delete all their enrollments${"parent"===a.role?" and all their children":""}. This action cannot be undone.`,onConfirm:async()=>{try{if("student"===a.role){const n=await L(e);if(n.length>0){const e=n.map(e=>e.id);await E.from("enrollments").delete().in("id",e)}}if("parent"===a.role){const n=await $(e);for(const e of n){const n=await L(e.id);if(n.length>0){const e=n.map(e=>e.id);await E.from("enrollments").delete().in("id",e)}await F(e.id)}}const{error:n}=await E.from("profiles").delete().eq("id",e);if(n)return void s.error("Failed to delete user");s.success("User and related data deleted successfully"),C()}catch{s.error("Failed to delete user")}M(e=>({...e,isOpen:!1}))}})})(n.id,n.role),disabled:Z(n),className:"p-1 "+(Z(n)?"text-gray-300 cursor-not-allowed":"text-red-600 hover:text-red-900 cursor-pointer"),title:Z(n)?"Protected user":"Delete user",style:{cursor:Z(n)?"not-allowed":"pointer"},children:e.jsxDEV(d,{className:"h-4 w-4"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:471,columnNumber:25},void 0)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:460,columnNumber:23},void 0)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:410,columnNumber:21},void 0)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:409,columnNumber:19},void 0)]},n.id,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:363,columnNumber:17},void 0);var a})},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:361,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:334,columnNumber:11},void 0)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:333,columnNumber:9},void 0),0===_.length&&e.jsxDEV("div",{className:"text-center py-12",children:[e.jsxDEV(o,{className:"mx-auto h-12 w-12 text-gray-400"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:482,columnNumber:13},void 0),e.jsxDEV("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No users found"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:483,columnNumber:13},void 0),e.jsxDEV("p",{className:"mt-1 text-sm text-gray-500",children:g||"all"!==b||"all"!==h?"Try adjusting your search criteria.":"Get started by adding a new user."},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:484,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:481,columnNumber:11},void 0)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:332,columnNumber:7},void 0),_.length>0&&e.jsxDEV(z,{currentPage:w,totalPages:k,totalItems:_.length,itemsPerPage:T,onPageChange:e=>{I(e)},onItemsPerPageChange:e=>{H(e),I(1)},showItemsPerPage:!0,itemsPerPageOptions:[10,25,50,100]},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:495,columnNumber:9},void 0),e.jsxDEV(O,{isOpen:S,onClose:()=>j(!1),onSuccess:()=>{j(!1),D(null),C()},user:f||void 0,mode:P},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:508,columnNumber:7},void 0),e.jsxDEV(W,{isOpen:A.isOpen,title:A.title,message:A.message,onConfirm:A.onConfirm,onCancel:()=>M(e=>({...e,isOpen:!1})),variant:"danger"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:516,columnNumber:7},void 0)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminUserManagementNew.tsx",lineNumber:272,columnNumber:5},void 0)}},Symbol.toStringTag,{value:"Module"})),G=({checked:n,onCheckedChange:s,disabled:i=!1,className:a=""})=>e.jsxDEV("button",{type:"button",role:"switch","aria-checked":n,disabled:i,onClick:()=>s(!n),className:`\n        relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 ease-in-out\n        ${n?"bg-blue-600":"bg-gray-200"}\n        ${i?"opacity-50 cursor-not-allowed":"cursor-pointer"}\n        ${a}\n      `,children:e.jsxDEV("span",{className:`\n          inline-block h-4 w-4 transform rounded-full bg-white transition duration-200 ease-in-out\n          ${n?"translate-x-6":"translate-x-1"}\n        `},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/ui/switch.tsx",lineNumber:28,columnNumber:7},void 0)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/ui/switch.tsx",lineNumber:15,columnNumber:5},void 0),Q=n=>{switch(n.toLowerCase()){case"users":return e.jsxDEV(T,{className:"h-4 w-4"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:46,columnNumber:14},void 0);case"courses":return e.jsxDEV(b,{className:"h-4 w-4"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:48,columnNumber:14},void 0);case"enrollments":return e.jsxDEV(p,{className:"h-4 w-4"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:50,columnNumber:14},void 0);case"students":return e.jsxDEV(j,{className:"h-4 w-4"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:52,columnNumber:14},void 0);case"gurukuls":return e.jsxDEV(h,{className:"h-4 w-4"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:54,columnNumber:14},void 0);case"content":return e.jsxDEV(S,{className:"h-4 w-4"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:56,columnNumber:14},void 0);case"certificates":return e.jsxDEV(v,{className:"h-4 w-4"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:58,columnNumber:14},void 0);case"analytics":return e.jsxDEV(x,{className:"h-4 w-4"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:60,columnNumber:14},void 0);case"assignments":return e.jsxDEV(j,{className:"h-4 w-4"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:62,columnNumber:14},void 0);case"dashboard":return e.jsxDEV(x,{className:"h-4 w-4"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:64,columnNumber:14},void 0);case"settings":return e.jsxDEV(I,{className:"h-4 w-4"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:66,columnNumber:14},void 0);case"permissions":return e.jsxDEV(w,{className:"h-4 w-4"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:68,columnNumber:14},void 0);default:return e.jsxDEV(u,{className:"h-4 w-4"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:70,columnNumber:14},void 0)}},J={admin:[],business_admin:[],teacher:[],student:[],parent:[]},X={admin:{},business_admin:{},teacher:{},student:{},parent:{}};const Z=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const[i,a]=n.useState([]),[m,r]=n.useState(J),[o,t]=n.useState(X),[c,l]=n.useState("business_admin"),[d,w]=n.useState(!1),[I,T]=n.useState(!1),[V,W]=n.useState(!0),{canAccess:L}=R(),O=async()=>{try{W(!0);const{data:e,error:n}=await E.from("permissions").select("id, name, description, resource, action, created_at").order("resource, action");if(n)throw console.error("Error loading permissions:",n),n;const{data:i,error:m}=await E.from("role_permissions").select("id, role, permission_id, menu_visible, created_at");if(m)throw console.error("Error loading role permissions:",m),m;const o=(e||[]).map(e=>({id:e.id,name:e.name,description:e.description||`${e.resource} ${e.action} permission`,icon:Q(e.resource),resource:e.resource,action:e.action}));a(o);const c={admin:[],business_admin:[],teacher:[],student:[],parent:[]},l={admin:{},business_admin:{},teacher:{},student:{},parent:{}};(i||[]).forEach(e=>{c[e.role]&&(c[e.role].push(e.permission_id),l[e.role][e.permission_id]=e.menu_visible??!0)}),r(c),t(l),s.success(`Loaded ${o.length} permissions successfully`)}catch(e){console.error("Failed to load permissions:",e),s.error("Failed to load permissions from database. Please check your connection and permissions.")}finally{W(!1)}};if(n.useEffect(()=>{O()},[]),!L("permissions","view"))return e.jsxDEV("div",{className:"flex items-center justify-center h-64",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV(u,{className:"h-12 w-12 text-red-500 mx-auto mb-4"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:221,columnNumber:11},this),e.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:"Access Denied"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:222,columnNumber:11},this),e.jsxDEV("p",{className:"text-gray-500",children:"You don't have permission to view permissions."},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:223,columnNumber:11},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:220,columnNumber:9},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:219,columnNumber:7},this);if(V)return e.jsxDEV("div",{className:"flex items-center justify-center h-64",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV(N,{className:"h-8 w-8 text-blue-500 mx-auto mb-4 animate-spin"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:232,columnNumber:11},this),e.jsxDEV("p",{className:"text-gray-600",children:"Loading permissions..."},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:233,columnNumber:11},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:231,columnNumber:9},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:230,columnNumber:7},this);const $=Object.keys(J),F=m[c]||[],q=i.reduce((e,n)=>{const s=n.resource;return e[s]||(e[s]=[]),e[s].push(n),e},{});return e.jsxDEV("div",{className:"space-y-6",children:[I&&e.jsxDEV("div",{className:"flex items-center gap-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxDEV(u,{className:"h-4 w-4 text-yellow-600"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:294,columnNumber:11},this),e.jsxDEV("span",{className:"text-sm text-yellow-800",children:"You have unsaved changes"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:295,columnNumber:11},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:293,columnNumber:9},this),e.jsxDEV(H,{children:[e.jsxDEV(A,{children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV(M,{children:"Role Selection"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:302,columnNumber:15},this),e.jsxDEV(U,{children:"Select a role to manage its permissions. Changes are saved to the database."},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:303,columnNumber:15},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:301,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV(C,{onClick:O,disabled:V,className:"flex items-center gap-2",style:{backgroundColor:"#6b7280",color:"white"},children:[e.jsxDEV(N,{className:"h-4 w-4 "+(V?"animate-spin":"")},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:314,columnNumber:17},this),"Refresh"]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:308,columnNumber:15},this),e.jsxDEV(C,{onClick:async()=>{if(L("permissions","update"))try{w(!0);const{error:e}=await E.from("role_permissions").delete().eq("role",c);if(e)throw e;if(m[c].length>0){const e=m[c].map(e=>({role:c,permission_id:e,menu_visible:o[c]?.[e]??!0})),{error:n}=await E.from("role_permissions").insert(e);if(n)throw n}T(!1),s.success(`Permissions saved for ${c} role`)}catch{s.error("Failed to save permissions to database")}finally{w(!1)}else s.error("You don't have permission to update permissions")},disabled:d||!I,className:"flex items-center gap-2",style:{backgroundColor:I?"#3b82f6":"#6b7280",color:"white"},children:[e.jsxDEV(g,{className:"h-4 w-4"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:323,columnNumber:17},this),d?"Saving...":"Save Changes"]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:317,columnNumber:15},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:307,columnNumber:13},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:300,columnNumber:11},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:299,columnNumber:9},this),e.jsxDEV(_,{children:e.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:$.map(n=>{const s=c===n,i=(m[n]||[]).length;return e.jsxDEV("div",{onClick:()=>l(n),className:"p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 "+(s?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"font-medium text-gray-900 mb-1",children:"business_admin"===n?"Business admin":n.charAt(0).toUpperCase()+n.slice(1).toLowerCase()},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:345,columnNumber:21},this),e.jsxDEV(k,{variant:s?"default":"secondary",className:"text-xs",children:[i," permissions"]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:350,columnNumber:21},this),"business_admin"===n&&e.jsxDEV("div",{className:"text-xs text-gray-500 mt-1",children:"Limited admin access"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:354,columnNumber:23},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:344,columnNumber:19},this)},n,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:335,columnNumber:17},this)})},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:330,columnNumber:11},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:329,columnNumber:9},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:298,columnNumber:7},this),"business_admin"===c&&e.jsxDEV(H,{className:"border-amber-200 bg-amber-50",children:[e.jsxDEV(A,{children:[e.jsxDEV(M,{className:"text-amber-800 flex items-center gap-2",children:[e.jsxDEV(u,{className:"h-5 w-5"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:367,columnNumber:15},this),"Business Admin Role Guidelines"]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:366,columnNumber:13},this),e.jsxDEV(U,{className:"text-amber-700",children:"Business Admins have limited administrative access. Recommended permissions include:"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:370,columnNumber:13},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:365,columnNumber:11},this),e.jsxDEV(_,{children:[e.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[e.jsxDEV("div",{className:"flex items-center gap-2 text-amber-800",children:[e.jsxDEV(x,{className:"h-4 w-4"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:377,columnNumber:17},this),"Dashboard access"]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:376,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center gap-2 text-amber-800",children:[e.jsxDEV(b,{className:"h-4 w-4"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:381,columnNumber:17},this),"Course management"]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:380,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center gap-2 text-amber-800",children:[e.jsxDEV(p,{className:"h-4 w-4"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:385,columnNumber:17},this),"Enrollment oversight"]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:384,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center gap-2 text-amber-800",children:[e.jsxDEV(h,{className:"h-4 w-4"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:389,columnNumber:17},this),"Gurukul management"]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:388,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center gap-2 text-amber-800",children:[e.jsxDEV(v,{className:"h-4 w-4"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:393,columnNumber:17},this),"Certificate management"]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:392,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center gap-2 text-amber-800",children:[e.jsxDEV(S,{className:"h-4 w-4"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:397,columnNumber:17},this),"Content management"]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:396,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center gap-2 text-amber-800",children:[e.jsxDEV(j,{className:"h-4 w-4"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:401,columnNumber:17},this),"Student oversight"]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:400,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center gap-2 text-amber-800",children:[e.jsxDEV(j,{className:"h-4 w-4"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:405,columnNumber:17},this),"Course assignments"]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:404,columnNumber:15},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:375,columnNumber:13},this),e.jsxDEV("div",{className:"mt-3 p-2 bg-amber-100 rounded text-xs text-amber-800",children:[e.jsxDEV("strong",{children:"Note:"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:410,columnNumber:15},this)," Business Admins cannot access user management, system permissions, or advanced analytics."]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:409,columnNumber:13},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:374,columnNumber:11},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:364,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-6",children:0===i.length?e.jsxDEV(H,{children:e.jsxDEV(_,{className:"p-8 text-center",children:[e.jsxDEV(u,{className:"h-12 w-12 text-amber-500 mx-auto mb-4"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:420,columnNumber:15},this),e.jsxDEV("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Permissions Found"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:421,columnNumber:15},this),e.jsxDEV("p",{className:"text-gray-600 mb-4",children:"No permissions are currently loaded from the database. This could mean:"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:422,columnNumber:15},this),e.jsxDEV("div",{className:"text-left bg-gray-50 p-4 rounded-lg mb-4 text-sm",children:e.jsxDEV("ul",{className:"space-y-2",children:[e.jsxDEV("li",{className:"flex items-start gap-2",children:[e.jsxDEV("span",{className:"text-blue-600",children:"â€¢"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:428,columnNumber:21},this),e.jsxDEV("span",{children:"The permissions haven't been populated in your database yet"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:429,columnNumber:21},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:427,columnNumber:19},this),e.jsxDEV("li",{className:"flex items-start gap-2",children:[e.jsxDEV("span",{className:"text-blue-600",children:"â€¢"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:432,columnNumber:21},this),e.jsxDEV("span",{children:"There's a database connection issue"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:433,columnNumber:21},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:431,columnNumber:19},this),e.jsxDEV("li",{className:"flex items-start gap-2",children:[e.jsxDEV("span",{className:"text-blue-600",children:"â€¢"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:436,columnNumber:21},this),e.jsxDEV("span",{children:"The permissions table doesn't exist"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:437,columnNumber:21},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:435,columnNumber:19},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:426,columnNumber:17},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:425,columnNumber:15},this),e.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-lg text-sm text-left",children:[e.jsxDEV("h4",{className:"font-medium text-blue-900 mb-2",children:"ðŸ’¡ To populate permissions:"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:442,columnNumber:17},this),e.jsxDEV("ol",{className:"space-y-1 text-blue-800",children:[e.jsxDEV("li",{children:"1. Open your Supabase SQL Editor"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:444,columnNumber:19},this),e.jsxDEV("li",{children:"2. Run one of these SQL scripts from the SSH project:"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:445,columnNumber:19},this),e.jsxDEV("li",{className:"ml-4 font-mono text-xs bg-blue-100 p-2 rounded",children:["â€¢ add-missing-permissions-safe.sql (recommended)",e.jsxDEV("br",{},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:448,columnNumber:21},this),"â€¢ add-missing-permissions-with-created-by.sql",e.jsxDEV("br",{},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:450,columnNumber:21},this),"â€¢ add-missing-permissions.sql"]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:446,columnNumber:19},this),e.jsxDEV("li",{children:'3. Click the "Refresh" button above'},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:452,columnNumber:19},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:443,columnNumber:17},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:441,columnNumber:15},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:419,columnNumber:13},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:418,columnNumber:11},this):Object.entries(q).map(([n,i])=>e.jsxDEV(H,{children:[e.jsxDEV(A,{children:[e.jsxDEV(M,{className:"flex items-center gap-2",children:[i[0].icon,n.split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" ")," ","Permissions"]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:461,columnNumber:17},this),e.jsxDEV(U,{children:["Manage ",n.toLowerCase(),"-related permissions for the ",c," role"]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:469,columnNumber:17},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:460,columnNumber:15},this),e.jsxDEV(_,{children:e.jsxDEV("div",{className:"space-y-4",children:i.map(n=>{const i=F.includes(n.id),a=o[c]?.[n.id]??!0;return e.jsxDEV("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxDEV("div",{className:"flex items-center gap-3 flex-1",children:[e.jsxDEV("div",{className:"p-2 bg-gray-100 rounded-md",children:n.icon},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:484,columnNumber:27},this),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("div",{className:"font-medium text-gray-900",children:n.name},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:486,columnNumber:29},this),e.jsxDEV("div",{className:"text-sm text-gray-500",children:n.description},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:487,columnNumber:29},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:485,columnNumber:27},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:483,columnNumber:25},this),e.jsxDEV("div",{className:"flex items-center gap-4",children:[i&&e.jsxDEV("div",{className:"flex items-center gap-2 px-3 py-1 bg-gray-50 rounded-md border",children:[e.jsxDEV(f,{className:"h-4 w-4 text-gray-500"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:494,columnNumber:31},this),e.jsxDEV("span",{className:"text-xs text-gray-600",children:"Show in Menu"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:495,columnNumber:31},this),e.jsxDEV(G,{checked:a,onCheckedChange:e=>((e,n)=>{t(s=>({...s,[c]:{...s[c],[e]:n}})),T(!0),s.success(`Menu ${n?"visible":"hidden"} for ${c}`)})(n.id,e),className:"scale-75"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:496,columnNumber:31},this),a?e.jsxDEV(D,{className:"h-4 w-4 text-green-500"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:504,columnNumber:33},this):e.jsxDEV(P,{className:"h-4 w-4 text-orange-500"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:506,columnNumber:33},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:493,columnNumber:29},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[i&&e.jsxDEV(y,{className:"h-4 w-4 text-green-500"},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:512,columnNumber:43},this),e.jsxDEV(G,{checked:i,onCheckedChange:e=>((e,n)=>{r(s=>{const i=s[c]||[],a=n?[...i,e]:i.filter(n=>n!==e);return T(!0),{...s,[c]:a}}),n&&t(n=>({...n,[c]:{...n[c],[e]:!0}})),s.success(`Permission ${n?"granted":"removed"} for ${c}`)})(n.id,e)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:513,columnNumber:29},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:511,columnNumber:27},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:490,columnNumber:25},this)]},n.id,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:479,columnNumber:23},this)})},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:474,columnNumber:17},this)},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:473,columnNumber:15},this)]},n,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:459,columnNumber:13},this))},void 0,!1,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:416,columnNumber:7},this)]},void 0,!0,{fileName:"D:/ITWala Projects/eyogi-main/src/SSH/src/components/admin/AdminPermissionManagement.tsx",lineNumber:291,columnNumber:5},this)}},Symbol.toStringTag,{value:"Module"}));export{Y as A,Z as a};
